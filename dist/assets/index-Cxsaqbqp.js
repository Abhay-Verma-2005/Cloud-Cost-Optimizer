var Js=Object.defineProperty;var ps=l=>{throw TypeError(l)};var Qs=(l,t,s)=>t in l?Js(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s;var U=(l,t,s)=>Qs(l,typeof t!="symbol"?t+"":t,s),en=(l,t,s)=>t.has(l)||ps("Cannot "+s);var hs=(l,t,s)=>t.has(l)?ps("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(l):t.set(l,s);var nt=(l,t,s)=>(en(l,t,"access private method"),s);import{j as e,C as tn,a as sn,L as nn,P as rn,b as an,B as on,p as ln,c as cn,d as dn,A as pn,e as hn,f as un,D as mn}from"./chart-vendor-DgEAPAmY.js";import{a as fn,L as Le,u as Ft,r as w,N as gn,B as xn,R as yn,b as it,c as bn}from"./react-vendor-C_8KrxbV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();var Lt={},us=fn;Lt.createRoot=us.createRoot,Lt.hydrateRoot=us.hydrateRoot;function jn(){return e.jsxs("div",{className:"landing-page",children:[e.jsxs("header",{className:"landing-header",children:[e.jsx("nav",{className:"landing-nav",children:e.jsxs("div",{className:"nav-container",children:[e.jsxs("div",{className:"nav-brand",children:[e.jsx("img",{src:"/logo-a.png",alt:"CostInsight Logo",className:"brand-logo-img"}),e.jsx("span",{children:"CostInsight"})]}),e.jsxs("div",{className:"nav-links",children:[e.jsx(Le,{to:"/login",className:"nav-link",children:"Login"}),e.jsx(Le,{to:"/signup",className:"nav-link-button",children:"Get Started"})]})]})}),e.jsxs("section",{className:"hero-section",children:[e.jsxs("div",{className:"hero-content",children:[e.jsx("h1",{className:"hero-title",children:e.jsx("span",{className:"gradient-text",children:"AI-Powered AWS Cost Optimization"})}),e.jsxs("p",{className:"hero-description",children:["Unlock the full potential of your AWS cloud with real-time analytics, smart recommendations, and enterprise-grade security. ",e.jsx("br",{}),e.jsx("span",{style:{color:"#FFB84D",fontWeight:600},children:"Save more. Grow faster. Stay in control."})]}),e.jsxs("div",{className:"hero-buttons",children:[e.jsxs(Le,{to:"/signup",className:"btn-primary",children:[e.jsx("i",{className:"fa-solid fa-circle-play"})," Start Free Trial"]}),e.jsxs(Le,{to:"/login",className:"btn-secondary",children:[e.jsx("i",{className:"fa-solid fa-sign-in-alt"})," Sign In"]})]})]}),e.jsx("div",{className:"hero-logo",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"250",height:"250",fill:"#FF9900",children:e.jsx("path",{d:"M19.684 18.335a.5.5 0 0 0-.291.032a20.4 20.4 0 0 1-4.385 1.469a14.57 14.57 0 0 1-8.965-.979a34 34 0 0 1-3.368-1.806a.23.23 0 0 0-.129-.051a.24.24 0 0 0-.13.022a.23.23 0 0 0-.09.075a.15.15 0 0 0-.01.132a.5.5 0 0 0 .113.181a10 10 0 0 0 .942.951a14.5 14.5 0 0 0 1.486 1.142a15 15 0 0 0 1.935 1.133a12 12 0 0 0 2.345.832a11 11 0 0 0 2.67.337a12.5 12.5 0 0 0 2.574-.266a12 12 0 0 0 2.111-.632a12 12 0 0 0 1.581-.806a8.6 8.6 0 0 0 1.071-.739a4 4 0 0 0 .493-.474a.6.6 0 0 0 .169-.363q-.001-.164-.122-.193M12.421 8.067a13 13 0 0 0-1.342.2a11 11 0 0 0-1.459.376a8 8 0 0 0-1.374.62a5.3 5.3 0 0 0-1.2.9a3.9 3.9 0 0 0-.808 1.268a4.4 4.4 0 0 0-.315 1.677a4.3 4.3 0 0 0 .349 1.769a3.1 3.1 0 0 0 .932 1.23a4.7 4.7 0 0 0 1.318.713a4.1 4.1 0 0 0 1.542.229a6.7 6.7 0 0 0 1.572-.251a4.7 4.7 0 0 0 1.43-.691A4.3 4.3 0 0 0 14.164 15a2 2 0 0 0 .28.359l.213.217q.212.216.651.637q.438.42.886.822l2.548-2.438l-.147-.119a3 3 0 0 1-.371-.349a6 6 0 0 1-.419-.5a2.8 2.8 0 0 1-.359-.632a1.8 1.8 0 0 1-.151-.7V5.885a2.6 2.6 0 0 0-.139-.8a3.6 3.6 0 0 0-.506-.935a4.1 4.1 0 0 0-.907-.9a4.8 4.8 0 0 0-1.455-.669a7.1 7.1 0 0 0-2.03-.27a8.3 8.3 0 0 0-2.138.266a6.2 6.2 0 0 0-1.7.712a5.4 5.4 0 0 0-1.213 1.032a4.2 4.2 0 0 0-.752 1.23a3.6 3.6 0 0 0-.246 1.3l3.3.291a3.7 3.7 0 0 1 .537-1.045a3 3 0 0 1 .629-.646a2.7 2.7 0 0 1 .627-.322a2.6 2.6 0 0 1 .454-.132a2 2 0 0 1 .186-.01a1.51 1.51 0 0 1 1.357.576a1.9 1.9 0 0 1 .236 1.057V8q-.557.022-1.113.071m1.116 3.706a3.6 3.6 0 0 1-.159 1.1a1.86 1.86 0 0 1-1.279 1.332a1.8 1.8 0 0 1-1.559-.24a1.63 1.63 0 0 1-.786-1.447a2.1 2.1 0 0 1 .366-1.247a2.23 2.23 0 0 1 .979-.775a5.8 5.8 0 0 1 1.2-.364a8 8 0 0 1 1.245-.132zm8.179 5.342q-.157-.197-.851-.261a5 5 0 0 0-1.213.01a4 4 0 0 0-1.154.327c-.4.173-.571.319-.527.434l.017.032l.022.017h.224c.034 0 .066-.008.095-.01l.125-.01a1 1 0 0 0 .146-.017l.252-.022q.242-.02.348-.032a7 7 0 0 1 .354-.022a4 4 0 0 1 .393 0c.1.008.208.018.332.027a1 1 0 0 1 .3.066a.4.4 0 0 1 .173.125q.188.24-.073 1.071a11 11 0 0 1-.5 1.323q-.102.207 0 .261c.068.037.163 0 .29-.1a3.3 3.3 0 0 0 .954-1.349a5 5 0 0 0 .32-1.116a1.2 1.2 0 0 0-.032-.756"})})})]})]}),e.jsxs("main",{children:[e.jsx("section",{className:"features-section",style:{paddingBottom:60},children:e.jsxs("div",{className:"section-container",children:[e.jsxs("div",{className:"section-header-center",children:[e.jsx("h2",{children:"Why Choose CostInsight?"}),e.jsx("p",{children:"All-in-one AWS cost management, powered by AI. Designed for modern teams and enterprises."})]}),e.jsxs("div",{className:"features-grid",children:[e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon primary",children:e.jsx("i",{className:"fa-solid fa-chart-line"})}),e.jsx("h3",{children:"Real-Time Cost Analytics"}),e.jsx("p",{children:"Monitor AWS spending across services with live dashboards, custom alerts, and detailed breakdowns by region and resource tags."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon success",children:e.jsx("i",{className:"fa-solid fa-robot"})}),e.jsx("h3",{children:"AI-Powered Optimization"}),e.jsx("p",{children:"AI analyzes your infrastructure patterns and provides intelligent recommendations to reduce costs while maintaining performance."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon warning",children:e.jsx("i",{className:"fa-solid fa-server"})}),e.jsx("h3",{children:"Multi-Service Infrastructure Analysis"}),e.jsx("p",{children:"Deep insights into EC2, RDS, Lambda, EBS, and all AWS compute resources."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon info",children:e.jsx("i",{className:"fa-solid fa-bell"})}),e.jsx("h3",{children:"Intelligent Alerting System"}),e.jsx("p",{children:"Proactive notifications for cost anomalies, budget thresholds, and optimization opportunities with customizable alert rules."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon error",children:e.jsx("i",{className:"fa-solid fa-shield-halved"})}),e.jsx("h3",{children:"Security & Compliance"}),e.jsx("p",{children:"Secure credential storage, AWS IAM integration, encrypted data, and compliance-ready infrastructure."})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon secondary",children:e.jsx("i",{className:"fa-solid fa-clock-rotate-left"})}),e.jsx("h3",{children:"Historical Trend Analysis"}),e.jsx("p",{children:"Track spending patterns over time with advanced analytics, forecasting, and year-over-year cost comparison reports."})]})]})]})}),e.jsx("section",{className:"how-it-works-section",style:{paddingTop:0,marginTop:-40},children:e.jsxs("div",{className:"section-container",children:[e.jsxs("div",{className:"section-header-center",children:[e.jsx("h2",{children:"How It Works"}),e.jsx("p",{children:"Get started in minutes. See results instantly."})]}),e.jsxs("div",{className:"steps-container",children:[e.jsxs("div",{className:"step-item",children:[e.jsx("div",{className:"step-number",children:"1"}),e.jsxs("div",{className:"step-content",children:[e.jsx("h3",{children:"Connect AWS"}),e.jsx("p",{children:"Securely connect your AWS account with read-only IAM credentials."})]})]}),e.jsx("div",{className:"step-arrow",children:e.jsx("i",{className:"fa-solid fa-arrow-right"})}),e.jsxs("div",{className:"step-item",children:[e.jsx("div",{className:"step-number",children:"2"}),e.jsxs("div",{className:"step-content",children:[e.jsx("h3",{children:"Scan & Analyze"}),e.jsx("p",{children:"Automated scan of all AWS resources, services, and cost data."})]})]}),e.jsx("div",{className:"step-arrow",children:e.jsx("i",{className:"fa-solid fa-arrow-right"})}),e.jsxs("div",{className:"step-item",children:[e.jsx("div",{className:"step-number",children:"3"}),e.jsxs("div",{className:"step-content",children:[e.jsx("h3",{children:"AI Recommendations"}),e.jsx("p",{children:"Receive custom optimization strategies and cost-saving tips."})]})]}),e.jsx("div",{className:"step-arrow",children:e.jsx("i",{className:"fa-solid fa-arrow-right"})}),e.jsxs("div",{className:"step-item",children:[e.jsx("div",{className:"step-number",children:"4"}),e.jsxs("div",{className:"step-content",children:[e.jsx("h3",{children:"Implement & Save"}),e.jsx("p",{children:"Apply recommendations and watch your AWS bills decrease."})]})]})]})]})})]}),e.jsx("footer",{className:"landing-footer",children:e.jsxs("div",{className:"footer-container",children:[e.jsxs("div",{className:"footer-brand",children:[e.jsx("img",{src:"/logo-a.png",alt:"CostInsight Logo",className:"brand-logo-img"}),e.jsx("span",{children:"CostInsight"})]}),e.jsxs("div",{className:"footer-madeby",children:[e.jsx("div",{className:"footer-madeby-title",children:"Made by"}),e.jsxs("div",{className:"footer-madeby-list",children:[e.jsxs("div",{className:"footer-person",children:[e.jsx("span",{className:"footer-person-name",children:"Abhay Verma"}),e.jsx("span",{className:"footer-person-role",children:"Software Developer"})]}),e.jsxs("div",{className:"footer-person",children:[e.jsx("span",{className:"footer-person-name",children:"Ananya Chaurasia"}),e.jsx("span",{className:"footer-person-role",children:"Cloud & Software Developer"})]})]}),e.jsx("div",{className:"footer-email",children:"abhayverma5545@gmail.com"}),e.jsx("div",{className:"footer-copyright",children:"© 2026 CostInsight. All rights reserved."})]})]})})]})}const Ie="",$t={async login(l,t){return(await fetch(`${Ie}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l,password:t})})).json()},async signup(l,t,s){return(await fetch(`${Ie}/api/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l,password:t,email:s})})).json()},async analyzeAWS(l,t,s={}){const n=localStorage.getItem("authToken");return(await fetch(`${Ie}/api/dashboard`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({awsAccessKey:l,awsSecretKey:t,...s})})).json()},async getHistory(){const l=localStorage.getItem("authToken");return(await fetch(`${Ie}/api/history`,{method:"GET",headers:{Authorization:`Bearer ${l}`}})).json()},async askAI(l){const t=localStorage.getItem("authToken");return(await fetch(`${Ie}/api/ai-advisor`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({question:l})})).json()},async stopInstance(l){const t=localStorage.getItem("authToken");return(await fetch(`${Ie}/api/stop-instance`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({instanceId:l})})).json()}};function wn({title:l,message:t,isError:s,onClose:n}){return e.jsx("div",{className:"modal",style:{display:"block",position:"fixed",zIndex:9999,left:0,top:0,width:"100%",height:"100%",overflow:"auto",backgroundColor:"rgba(0,0,0,0.4)"},children:e.jsxs("div",{className:"modal-content",style:{backgroundColor:"#fefefe",margin:"15% auto",padding:"20px",border:"1px solid #888",width:"80%",maxWidth:"400px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[e.jsx("h3",{style:{color:s?"var(--color-error)":"var(--color-primary)",marginBottom:"15px"},children:l}),e.jsx("p",{style:{marginBottom:"20px",color:"#333"},children:t}),e.jsx("div",{className:"modal-button-group",style:{textAlign:"right"},children:e.jsx("button",{onClick:n,style:{padding:"10px 20px",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"OK"})})]})})}function kn(){const l=Ft(),[t,s]=w.useState(""),[n,i]=w.useState(""),[r,a]=w.useState(!1),[p,c]=w.useState({show:!1,title:"",message:"",isError:!1}),g=async f=>{if(f.preventDefault(),!t||!n){c({show:!0,title:"Validation Error",message:"Please enter both username and password",isError:!0});return}a(!0);try{const d=await $t.login(t,n);d.success?(localStorage.setItem("authToken",d.token),localStorage.setItem("username",d.username),c({show:!0,title:"Login Successful",message:`Welcome back, ${d.username}! Redirecting to dashboard...`,isError:!1}),setTimeout(()=>{l("/dashboard")},1500)):c({show:!0,title:"Login Failed",message:d.message||"Invalid credentials",isError:!0})}catch(d){console.error("Login request failed:",d),c({show:!0,title:"Connection Error",message:"Could not connect to the server. Please ensure the backend is running.",isError:!0})}finally{a(!1)}},u=()=>{c({...p,show:!1})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"header",style:{padding:"8px 20px"},children:[e.jsxs("h1",{children:[e.jsx("img",{src:"/logo-a.png",alt:"CostInsight Logo",style:{width:"2.5rem",height:"2.5rem",objectFit:"contain",marginRight:"10px",verticalAlign:"middle"}}),"CostInsight"]}),e.jsx("p",{style:{fontSize:"0.9rem",padding:"0px 10px",fontWeight:300},children:"Insight of your Real-Time AWS Analytics & AI-Powered Advisor"})]}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card",style:{maxWidth:"450px",margin:"50px auto",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.15)"},children:[e.jsx("h2",{style:{textAlign:"center",color:"var(--color-primary)",marginBottom:"10px"},children:"Welcome Back"}),e.jsx("p",{style:{textAlign:"center",marginBottom:"30px",color:"#666",fontSize:"0.95rem"},children:"Sign in to analyze your AWS infrastructure"}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",children:"Username:"}),e.jsx("input",{type:"text",id:"username",placeholder:"Enter your username",value:t,onChange:f=>s(f.target.value),required:!0,autoComplete:"username"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password:"}),e.jsx("input",{type:"password",id:"password",placeholder:"Enter your password",value:n,onChange:f=>i(f.target.value),required:!0,autoComplete:"current-password"})]}),e.jsx("button",{type:"submit",style:{width:"100%",padding:"14px",fontSize:"1.05rem"},disabled:r,children:r?"Loading...":e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-right-to-bracket"})," Log In"]})})]}),e.jsxs("div",{style:{marginTop:"20px",textAlign:"center",color:"#666",fontSize:"0.95rem"},children:["Don't have an account?",e.jsx(Le,{to:"/signup",style:{color:"var(--color-primary)",textDecoration:"none",fontWeight:600,marginLeft:"5px"},children:"Create Account"})]}),e.jsx("div",{style:{marginTop:"25px",paddingTop:"20px",borderTop:"1px solid #ddd",textAlign:"center",color:"#666",fontSize:"0.9rem"},children:e.jsxs("p",{children:[e.jsx("i",{className:"fa-solid fa-lightbulb"})," ",e.jsx("strong",{children:"Features:"})," Real-time AWS monitoring • Cloud cost advisor • AI cost Optimizer"]})})]})}),p.show&&e.jsx(wn,{title:p.title,message:p.message,isError:p.isError,onClose:u})]})}function vn(){const l=Ft(),[t,s]=w.useState({username:"",password:"",confirmPassword:"",email:""}),[n,i]=w.useState({}),[r,a]=w.useState(!1),[p,c]=w.useState(""),g={username:{min:"Username must be at least 3 characters",max:"Username must be less than 20 characters",pattern:"Username can only contain letters, numbers, and underscores"},password:{min:"Password must be at least 6 characters",max:"Password is too long"},confirmPassword:{empty:"Please confirm your password",mismatch:"Passwords do not match"},email:{empty:"Email is required",invalid:"Please enter a valid email address"}},u=(T,b)=>{let j="";switch(T){case"username":b.length<3?j=g.username.min:b.length>20?j=g.username.max:/^\w+$/.test(b)||(j=g.username.pattern);break;case"password":b.length<6?j=g.password.min:b.length>100&&(j=g.password.max);break;case"confirmPassword":b?b!==t.password&&(j=g.confirmPassword.mismatch):j=g.confirmPassword.empty;break;case"email":b?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b)||(j=g.email.invalid):j=g.email.empty;break}return j},f=T=>{const{name:b,value:j}=T.target;s(A=>({...A,[b]:j})),n[b]&&i(A=>({...A,[b]:""}))},d=T=>{const{name:b,value:j}=T.target,A=u(b,j.trim());A&&i(N=>({...N,[b]:A}))},x=async T=>{T.preventDefault();const b={};if(Object.keys(t).forEach(j=>{const A=u(j,t[j].trim());A&&(b[j]=A)}),Object.keys(b).length>0){i(b);return}a(!0);try{const j=await $t.signup(t.username.trim(),t.password,t.email.trim());if(j.success)c("Account created successfully! Redirecting to login..."),s({username:"",password:"",confirmPassword:"",email:""}),setTimeout(()=>l("/login"),2e3);else{const A=j.error||j.message||"Signup failed";A.toLowerCase().includes("username")?i(N=>({...N,username:A})):A.toLowerCase().includes("password")?i(N=>({...N,password:A})):alert("Signup failed: "+A)}}catch(j){console.error("Signup error:",j),alert("Network error. Please ensure the backend is running.")}finally{a(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"header",style:{padding:"8px 20px"},children:[e.jsxs("h1",{children:[e.jsx("img",{src:"/logo-a.png",alt:"CostInsight Logo",style:{width:"2.5rem",height:"2.5rem",objectFit:"contain",marginRight:"10px",verticalAlign:"middle"}}),"CostInsight"]}),e.jsx("p",{children:"Create Your Account"})]}),e.jsx("div",{style:{minHeight:"calc(100vh - 60px)",display:"flex",justifyContent:"center",alignItems:"center",background:"#F8F8F8",padding:"20px"},children:e.jsxs("div",{className:"card",style:{marginTop:"20px",marginBottom:"20px"},children:[e.jsx("h2",{children:"Create Account"}),e.jsx("p",{children:"Join CostInsight to optimize your AWS costs"}),p&&e.jsx("div",{className:"alert alert-success",children:p}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{type:"text",id:"username",name:"username",placeholder:"Enter your username",value:t.username,onChange:f,onBlur:d,required:!0}),n.username&&e.jsx("div",{style:{color:"#C7511F",fontSize:"13px",marginTop:"5px",fontWeight:500},children:n.username})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"email",children:["Email ",e.jsx("span",{style:{color:"#C7511F"},children:"*"})]}),e.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Enter your email",value:t.email,onChange:f,onBlur:d,required:!0}),n.email&&e.jsx("div",{style:{color:"#C7511F",fontSize:"13px",marginTop:"5px",fontWeight:500},children:n.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",placeholder:"Enter a secure password (min. 6 characters)",value:t.password,onChange:f,onBlur:d,required:!0}),n.password&&e.jsx("div",{style:{color:"#C7511F",fontSize:"13px",marginTop:"5px",fontWeight:500},children:n.password})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Re-enter your password",value:t.confirmPassword,onChange:f,onBlur:d,required:!0}),n.confirmPassword&&e.jsx("div",{style:{color:"#C7511F",fontSize:"13px",marginTop:"5px",fontWeight:500},children:n.confirmPassword})]}),e.jsx("button",{type:"submit",disabled:r,children:r?"Creating Account...":"Create Account"})]}),e.jsxs("div",{className:"auth-link",children:["Already have an account?"," ",e.jsx(Le,{to:"/login",children:"Sign In"})]})]})})]})}const ue=l=>`$${parseFloat(l).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Es=l=>new Date(l).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});function Sn({username:l,onLogout:t,onOpenSettings:s}){return e.jsx("div",{className:"header",children:e.jsxs("div",{className:"header-container",children:[e.jsxs("div",{className:"header-brand",children:[e.jsx("a",{href:"/",style:{textDecoration:"none",cursor:"pointer"},children:e.jsxs("h1",{className:"header-title",children:[e.jsx("img",{src:"/logo-a.png",alt:"CostInsight Logo",style:{width:"2.4rem",height:"2.4rem",objectFit:"contain",marginRight:"8px",display:"inline-block",verticalAlign:"middle"}}),"CostInsight"]})}),e.jsx("p",{className:"header-subtitle",children:"Insight of your Real-Time AWS Analytics & AI-Powered Advisor"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"profile-section",onClick:s,children:[e.jsx("div",{className:"profile-icon-circle",children:e.jsx("i",{className:"fa-solid fa-user-circle"})}),e.jsxs("div",{className:"profile-info",children:[e.jsx("div",{className:"profile-name",children:l||"Loading..."}),e.jsx("div",{className:"profile-label",children:"View Profile"})]})]}),e.jsxs("button",{className:"logout-button",onClick:t,children:[e.jsx("i",{className:"fa-solid fa-right-from-bracket"}),e.jsx("span",{children:"Logout"})]})]})]})})}function An({currentSection:l,onNavigate:t}){const s=[{id:"dashboard",label:"Dashboard",icon:"fa-chart-line"},{id:"resource-management",label:"Resource Management",icon:"fa-sliders"},{id:"ai-assistant",label:"AI Assistant",icon:"fa-robot"},{id:"historical-trends",label:"Historical Trends",icon:"fa-clock-rotate-left"},{id:"credentials",label:"AWS Credentials",icon:"fa-key"}];return e.jsx("div",{className:"navbar",children:e.jsx("div",{className:"container",children:e.jsx("ul",{className:"nav-menu",children:s.map(n=>e.jsx("li",{className:`nav-item ${l===n.id?"active":""}`,children:e.jsxs("a",{href:`#${n.id}`,onClick:i=>{i.preventDefault(),t(n.id)},children:[e.jsx("i",{className:`fa-solid ${n.icon}`}),e.jsx("span",{children:n.label})]})},n.id))})})})}function Tn({onAnalyze:l,onBack:t}){const[s,n]=w.useState(!1),[i,r]=w.useState({awsAccessKey:"",awsSecretKey:""}),a=w.useRef(!0);w.useEffect(()=>()=>{a.current=!1},[]),w.useEffect(()=>{const c=localStorage.getItem("awsCredentials");if(c)try{const{awsAccessKey:g,awsSecretKey:u}=JSON.parse(c);r({awsAccessKey:g,awsSecretKey:u}),console.log("✅ Loaded saved AWS credentials")}catch(g){console.error("Error loading saved credentials:",g)}},[]);const p=async c=>{c.preventDefault(),n(!0);try{await l(i.awsAccessKey,i.awsSecretKey)}catch(g){console.error("Analysis failed:",g)}finally{a.current&&n(!1)}};return e.jsxs("div",{className:"section-card credentials-section",style:{display:"block"},children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("div",{children:[e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-key"})," AWS Credentials Management"]}),e.jsx("p",{children:"Update your AWS credentials to analyze infrastructure in real-time"})]}),e.jsxs("button",{onClick:t,className:"refresh-btn",style:{padding:"10px 20px"},children:[e.jsx("i",{className:"fa-solid fa-arrow-left"})," Back to Dashboard"]})]}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"credentials-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"awsAccessKey",children:["AWS Access Key ID ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",id:"awsAccessKey",placeholder:"AKIAIOSFODNN7EXAMPLE",value:i.awsAccessKey,onChange:c=>r({...i,awsAccessKey:c.target.value}),required:!0,disabled:s})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"awsSecretKey",children:["AWS Secret Access Key ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"password",id:"awsSecretKey",placeholder:"wJalrXUtnFEMI/...",value:i.awsSecretKey,onChange:c=>r({...i,awsSecretKey:c.target.value}),required:!0,disabled:s})]})]}),e.jsxs("div",{className:"info-banner",children:[e.jsx("strong",{children:"ℹ️ Required AWS Permissions:"})," EC2:Describe*, CloudWatch:GetMetricStatistics, CostExplorer:GetCostAndUsage, RDS:Describe*, Lambda:List*"]}),e.jsx("button",{type:"submit",className:"analyze-button",disabled:s,style:{opacity:s?.7:1,cursor:s?"wait":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:s?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin"})," Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-magnifying-glass-chart"})," Analyze AWS Infrastructure"]})})]})]})}const K=({type:l="text",width:t,height:s,count:n=1,style:i})=>{const r=a=>{const p={width:t,height:s,...i};let c="skeleton";return l==="text"&&(c+=" skeleton-text"),l==="title"&&(c+=" skeleton-title"),l==="rect"&&(c+=" skeleton-rect"),l==="circle"&&(c+=" skeleton-circle"),l==="card"&&(c+=" skeleton-card"),e.jsx("div",{className:c,style:p},a)};return n===1?r(0):e.jsx(e.Fragment,{children:Array.from({length:n}).map((a,p)=>r(p))})},Nn=({rows:l=5,columns:t=5})=>e.jsxs("div",{style:{width:"100%"},children:[e.jsx("div",{className:"skeleton-table-row",style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:Array.from({length:t}).map((s,n)=>e.jsx("div",{className:"skeleton-cell",style:{height:"30px"}},`head-${n}`))}),Array.from({length:l}).map((s,n)=>e.jsx("div",{className:"skeleton-table-row",children:Array.from({length:t}).map((i,r)=>e.jsx("div",{className:"skeleton-cell"},`cell-${n}-${r}`))},`row-${n}`))]}),rt=()=>e.jsxs("div",{className:"skeleton-card",children:[e.jsx("div",{className:"skeleton skeleton-title",style:{width:"60%"}}),e.jsx("div",{className:"skeleton skeleton-text"}),e.jsx("div",{className:"skeleton skeleton-text"}),e.jsx("div",{className:"skeleton skeleton-rect",style:{height:"100px",marginTop:"auto"}})]}),En=()=>e.jsxs("div",{style:{padding:"20px 0"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsx(rt,{}),e.jsx(rt,{}),e.jsx(rt,{}),e.jsx(rt,{})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{className:"section-card",style:{padding:"20px",background:"white",borderRadius:"8px"},children:[e.jsx(K,{type:"title",width:"40%"}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[e.jsx(K,{type:"text",width:"60%"}),e.jsx(K,{type:"text",width:"20%"})]}),e.jsx(K,{type:"rect",height:"150px"})]})]}),e.jsxs("div",{className:"section-card",style:{padding:"20px",background:"white",borderRadius:"8px"},children:[e.jsx(K,{type:"title",width:"30%"}),e.jsxs("div",{style:{marginTop:"20px",display:"flex",gap:"20px"},children:[e.jsx(K,{type:"circle"}),e.jsxs("div",{style:{flex:1},children:[e.jsx(K,{type:"text"}),e.jsx(K,{type:"text",width:"80%"})]})]})]})]}),e.jsxs("div",{className:"section-card",style:{padding:"20px",background:"white",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"20px"},children:[e.jsx(K,{type:"circle",style:{width:"40px",height:"40px"}}),e.jsx(K,{type:"title",width:"50%",style:{marginBottom:0}})]}),e.jsx(K,{type:"text"}),e.jsx(K,{type:"text"}),e.jsx(K,{type:"text",width:"90%"}),e.jsx(K,{type:"text",width:"95%"}),e.jsx("br",{}),e.jsx(K,{type:"text",width:"85%"}),e.jsx(K,{type:"text"}),e.jsx(K,{type:"text",width:"80%"})]})]})]});function Cn({data:l,onNavigate:t}){var p,c;const{awsData:s,aiAdvice:n,history:i,isSimulated:r,validatedAccount:a}=l;return e.jsxs("div",{id:"dashboardContent",style:{display:"block"},children:[e.jsx("div",{className:"section-card",style:{background:"linear-gradient(135deg, #fefce8 0%, #eef2ff 100%)",borderLeft:"5px solid #4f46e5",marginBottom:"24px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{color:"#3730a3",margin:"0 0 8px 0",fontSize:"1.1rem"},children:[e.jsx("i",{className:"fa-solid fa-cloud-arrow-up"})," Connected AWS Account"]}),e.jsx("p",{style:{margin:0,fontSize:"1.2rem",fontWeight:700,color:"#495057"},children:a?`AWS Account: ${a}`:"Connected"}),e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"0.85rem",color:"#6c757d"},children:["Last updated: ",Es(s.timestamp)]})]}),e.jsx("div",{style:{background:"white",padding:"16px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:e.jsx("i",{className:"fa-brands fa-aws",style:{fontSize:"3rem",color:"#ff9900"}})})]})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-dollar-sign"})," Cost Overview"]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:e.jsx("div",{className:"refresh-indicator",style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"4px"},children:e.jsxs("span",{style:{color:r?"var(--color-warning)":"var(--color-success)"},children:["● ",r?"Simulated Data":"Real-Time Data"]})})})]}),e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-box primary",children:[e.jsx("div",{className:"metric-label",children:"Current Month Cost"}),e.jsx("div",{className:"metric-value",children:ue(s.totalMonthlyCost)}),e.jsx("div",{className:"metric-change",children:"--"})]}),e.jsxs("div",{className:"metric-box success",children:[e.jsx("div",{className:"metric-label",children:"Potential Savings"}),e.jsx("div",{className:"metric-value",children:ue(s.savingsOpportunities)}),e.jsx("div",{className:"metric-change",children:"Optimization opportunities"})]}),e.jsxs("div",{className:"metric-box warning",children:[e.jsx("div",{className:"metric-label",children:"Forecasted Cost"}),e.jsx("div",{className:"metric-value",children:ue(s.forecastedCost||s.totalMonthlyCost)}),e.jsx("div",{className:"metric-change",children:"End of month projection"})]}),e.jsxs("div",{className:"metric-box info",children:[e.jsx("div",{className:"metric-label",children:"Annual Savings"}),e.jsx("div",{className:"metric-value",children:ue(s.savingsOpportunities*12)}),e.jsx("div",{className:"metric-change",children:"If optimizations applied"})]})]})]}),e.jsxs("div",{className:"section-card",children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-server"})," Infrastructure Overview"]})}),e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-box",children:[e.jsx("div",{className:"metric-label",children:"Total EC2 Instances"}),e.jsx("div",{className:"metric-value",children:s.totalInstances||0}),e.jsxs("div",{className:"metric-subtext",children:["Running: ",s.runningInstances||0," | Stopped: ",s.stoppedInstances||0]})]}),e.jsxs("div",{className:"metric-box",children:[e.jsx("div",{className:"metric-label",children:"EBS Volumes"}),e.jsx("div",{className:"metric-value",children:s.totalVolumes||0}),e.jsxs("div",{className:"metric-subtext",children:["Storage: ",s.totalStorageGB||0," GB | Unattached: ",s.unattachedVolumes||0]})]}),e.jsxs("div",{className:"metric-box",children:[e.jsx("div",{className:"metric-label",children:"Snapshots"}),e.jsx("div",{className:"metric-value",children:s.totalSnapshots||0}),e.jsxs("div",{className:"metric-subtext",children:["Old snapshots: ",((p=s.oldSnapshots)==null?void 0:p.length)||0]})]}),e.jsxs("div",{className:"metric-box",children:[e.jsx("div",{className:"metric-label",children:"Lambda Functions"}),e.jsx("div",{className:"metric-value",children:s.totalLambdaFunctions||0}),e.jsxs("div",{className:"metric-subtext",children:["Underutilized: ",((c=s.underutilizedLambda)==null?void 0:c.length)||0]})]}),e.jsxs("div",{className:"metric-box",children:[e.jsx("div",{className:"metric-label",children:"RDS Instances"}),e.jsx("div",{className:"metric-value",children:s.totalRDSInstances||0})]})]})]}),e.jsxs("div",{className:"section-card",children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-bolt"})," Quick Actions"]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[e.jsxs("button",{onClick:()=>t("credentials"),className:"refresh-btn",style:{width:"100%"},children:[e.jsx("i",{className:"fa-solid fa-rotate"})," Refresh Analysis"]}),e.jsxs("button",{onClick:()=>t("ai-assistant"),className:"ask-button",style:{width:"100%"},children:[e.jsx("i",{className:"fa-solid fa-robot"})," Ask AI Assistant"]}),e.jsxs("button",{onClick:()=>t("historical-trends"),className:"refresh-btn",style:{width:"100%"},children:[e.jsx("i",{className:"fa-solid fa-chart-line"})," View Trends"]})]})]})]})}function _n({isOpen:l,onClose:t,userInfo:s,onUpdate:n}){const[i,r]=w.useState("profile"),[a,p]=w.useState({username:"",email:"",mobile:"",age:"",gender:""}),[c,g]=w.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[u,f]=w.useState(!1),[d,x]=w.useState({type:"",text:""}),[T,b]=w.useState(!1),[j,A]=w.useState("");if(w.useEffect(()=>{l&&s&&p({username:s.username||"",email:s.email||"",mobile:s.mobile||"",age:s.age||"",gender:s.gender||""})},[l,s]),w.useEffect(()=>{x({type:"",text:""}),b(!1),A("")},[i]),!l)return null;const N=D=>{p({...a,[D.target.name]:D.target.value})},_=D=>{g({...c,[D.target.name]:D.target.value})},E=async D=>{D.preventDefault(),f(!0),x({type:"",text:""});try{const X=await(await fetch("/api/profile/update",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(a)})).json();if(X.success){x({type:"success",text:"Profile updated successfully!"});const $=await(await fetch("/api/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json();$.success&&n&&n($.user)}else x({type:"error",text:X.message||"Failed to update profile"})}catch{x({type:"error",text:"Network error. Please try again."})}finally{f(!1)}},P=async D=>{if(D.preventDefault(),c.newPassword!==c.confirmPassword){x({type:"error",text:"New passwords do not match"});return}f(!0),x({type:"",text:""});try{const X=await(await fetch("/api/profile/change-password",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({currentPassword:c.currentPassword,newPassword:c.newPassword})})).json();X.success?(x({type:"success",text:"Password updated successfully!"}),g({currentPassword:"",newPassword:"",confirmPassword:""})):x({type:"error",text:X.message||"Failed to update password"})}catch{x({type:"error",text:"Network error. Please try again."})}finally{f(!1)}},re=async()=>{if(j!=="delete account"){x({type:"error",text:'Please type "delete account" correctly to confirm deletion.'});return}f(!0);try{const F=await(await fetch("/api/profile/delete",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json();F.success?(localStorage.clear(),window.location.href="/"):x({type:"error",text:F.message||"Failed to delete account"})}catch{x({type:"error",text:"Network error. Please try again."})}finally{f(!1)}};return e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"account-settings-modal",onClick:D=>D.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Account Settings"}),e.jsx("button",{className:"close-button",onClick:t,children:e.jsx("i",{className:"fa-solid fa-xmark"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"settings-sidebar",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("h3",{children:"Account"}),e.jsx("p",{children:"Manage your account info."})]}),e.jsxs("nav",{className:"settings-nav",children:[e.jsxs("button",{className:`settings-nav-item ${i==="profile"?"active":""}`,onClick:()=>r("profile"),children:[e.jsx("i",{className:"fa-solid fa-user"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{className:`settings-nav-item ${i==="security"?"active":""}`,onClick:()=>r("security"),children:[e.jsx("i",{className:"fa-solid fa-shield-halved"}),e.jsx("span",{children:"Security"})]})]})]}),e.jsxs("div",{className:"settings-content",children:[d.text&&e.jsx("div",{className:`alert alert-${d.type}`,children:d.text}),i==="profile"&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Profile Information"}),e.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:"20px",fontSize:"0.9rem"},children:"Fields are locked once saved. Contact support to change saved information."}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsxs("div",{className:"input-with-lock",children:[e.jsx("input",{type:"text",id:"username",name:"username",value:a.username,disabled:!0}),e.jsx("i",{className:"fa-solid fa-lock",style:{color:"var(--color-text-secondary)"}})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"email",children:["Email",a.email&&e.jsx("i",{className:"fa-solid fa-lock",style:{marginLeft:"8px",fontSize:"0.8rem",color:"var(--color-success)"}})]}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:N,placeholder:"your.email@example.com",disabled:!!a.email&&(s==null?void 0:s.email)})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"mobile",children:["Mobile",a.mobile&&e.jsx("i",{className:"fa-solid fa-lock",style:{marginLeft:"8px",fontSize:"0.8rem",color:"var(--color-success)"}})]}),e.jsx("input",{type:"tel",id:"mobile",name:"mobile",value:a.mobile,onChange:N,placeholder:"+1 234 567 8900",disabled:!!a.mobile&&(s==null?void 0:s.mobile)})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"age",children:["Age",a.age&&e.jsx("i",{className:"fa-solid fa-lock",style:{marginLeft:"8px",fontSize:"0.8rem",color:"var(--color-success)"}})]}),e.jsx("input",{type:"number",id:"age",name:"age",value:a.age,onChange:N,min:"18",max:"120",placeholder:"25",disabled:!!a.age&&(s==null?void 0:s.age)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"gender",children:["Gender",a.gender&&e.jsx("i",{className:"fa-solid fa-lock",style:{marginLeft:"8px",fontSize:"0.8rem",color:"var(--color-success)"}})]}),e.jsxs("select",{id:"gender",name:"gender",value:a.gender,onChange:N,disabled:!!a.gender&&(s==null?void 0:s.gender),children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"}),e.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),e.jsx("button",{type:"submit",className:"btn-save",disabled:u,children:u?"Saving...":"Save Changes"})]})]}),i==="security"&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Security"}),e.jsxs("div",{className:"security-item",children:[e.jsx("div",{className:"security-label",children:e.jsx("strong",{children:"Password"})}),e.jsx("div",{className:"password-display",children:e.jsx("span",{children:"••••••••••"})})]}),e.jsxs("form",{onSubmit:P,className:"password-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"currentPassword",children:"Current Password"}),e.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:c.currentPassword,onChange:_,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"newPassword",children:"New Password"}),e.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:c.newPassword,onChange:_,minLength:"6",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:c.confirmPassword,onChange:_,minLength:"6",required:!0})]}),e.jsx("button",{type:"submit",className:"btn-update",disabled:u,children:u?"Updating...":"Update Password"})]}),e.jsxs("div",{className:"delete-section",children:[e.jsx("h4",{children:"Delete Account"}),T?e.jsxs("div",{className:"delete-confirmation-box",style:{marginTop:"15px"},children:[e.jsxs("p",{className:"delete-warning",style:{marginBottom:"10px",color:"#dc3545"},children:["To confirm deletion, type ",e.jsx("strong",{children:"delete account"})," below:"]}),e.jsx("input",{type:"text",value:j,onChange:D=>A(D.target.value),placeholder:"delete account",className:"delete-input",style:{width:"100%",padding:"10px",border:"1px solid #ced4da",borderRadius:"4px",marginBottom:"10px",fontSize:"1rem"}}),e.jsxs("div",{className:"delete-actions",style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"button",className:"btn-delete",onClick:re,disabled:j!=="delete account"||u,style:{background:j==="delete account"?"#dc3545":"#e9ecef",color:j==="delete account"?"white":"#6c757d",cursor:j==="delete account"?"pointer":"not-allowed",opacity:u?.7:1},children:u?"Deleting...":"Confirm Delete"}),e.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>{b(!1),A(""),x({type:"",text:""})},style:{padding:"10px 20px",background:"transparent",border:"1px solid #ced4da",borderRadius:"4px",cursor:"pointer"},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"delete-warning",children:"Once you delete your account, there is no going back. Please be certain."}),e.jsx("button",{className:"btn-delete",onClick:()=>b(!0),type:"button",children:"Delete account"})]})]})]})]})]})]})})}function Ut(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Te=Ut();function Cs(l){Te=l}const _s=/[&<>"']/,Rn=new RegExp(_s.source,"g"),Rs=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,In=new RegExp(Rs.source,"g"),Ln={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ms=l=>Ln[l];function ie(l,t){if(t){if(_s.test(l))return l.replace(Rn,ms)}else if(Rs.test(l))return l.replace(In,ms);return l}const zn=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Pn(l){return l.replace(zn,(t,s)=>(s=s.toLowerCase(),s==="colon"?":":s.charAt(0)==="#"?s.charAt(1)==="x"?String.fromCharCode(parseInt(s.substring(2),16)):String.fromCharCode(+s.substring(1)):""))}const On=/(^|[^\[])\^/g;function O(l,t){let s=typeof l=="string"?l:l.source;t=t||"";const n={replace:(i,r)=>{let a=typeof r=="string"?r:r.source;return a=a.replace(On,"$1"),s=s.replace(i,a),n},getRegex:()=>new RegExp(s,t)};return n}function fs(l){try{l=encodeURI(l).replace(/%25/g,"%")}catch{return null}return l}const Ge={exec:()=>null};function gs(l,t){const s=l.replace(/\|/g,(r,a,p)=>{let c=!1,g=a;for(;--g>=0&&p[g]==="\\";)c=!c;return c?"|":" |"}),n=s.split(/ \|/);let i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function at(l,t,s){const n=l.length;if(n===0)return"";let i=0;for(;i<n&&l.charAt(n-i-1)===t;)i++;return l.slice(0,n-i)}function Dn(l,t){if(l.indexOf(t[1])===-1)return-1;let s=0;for(let n=0;n<l.length;n++)if(l[n]==="\\")n++;else if(l[n]===t[0])s++;else if(l[n]===t[1]&&(s--,s<0))return n;return-1}function xs(l,t,s,n){const i=t.href,r=t.title?ie(t.title):null,a=l[1].replace(/\\([\[\]])/g,"$1");if(l[0].charAt(0)!=="!"){n.state.inLink=!0;const p={type:"link",raw:s,href:i,title:r,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,p}return{type:"image",raw:s,href:i,title:r,text:ie(a)}}function Mn(l,t){const s=l.match(/^(\s+)(?:```)/);if(s===null)return t;const n=s[1];return t.split(`
`).map(i=>{const r=i.match(/^\s+/);if(r===null)return i;const[a]=r;return a.length>=n.length?i.slice(n.length):i}).join(`
`)}class pt{constructor(t){U(this,"options");U(this,"rules");U(this,"lexer");this.options=t||Te}space(t){const s=this.rules.block.newline.exec(t);if(s&&s[0].length>0)return{type:"space",raw:s[0]}}code(t){const s=this.rules.block.code.exec(t);if(s){const n=s[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:s[0],codeBlockStyle:"indented",text:this.options.pedantic?n:at(n,`
`)}}}fences(t){const s=this.rules.block.fences.exec(t);if(s){const n=s[0],i=Mn(n,s[3]||"");return{type:"code",raw:n,lang:s[2]?s[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):s[2],text:i}}}heading(t){const s=this.rules.block.heading.exec(t);if(s){let n=s[2].trim();if(/#$/.test(n)){const i=at(n,"#");(this.options.pedantic||!i||/ $/.test(i))&&(n=i.trim())}return{type:"heading",raw:s[0],depth:s[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const s=this.rules.block.hr.exec(t);if(s)return{type:"hr",raw:s[0]}}blockquote(t){const s=this.rules.block.blockquote.exec(t);if(s){const n=at(s[0].replace(/^ *>[ \t]?/gm,""),`
`),i=this.lexer.state.top;this.lexer.state.top=!0;const r=this.lexer.blockTokens(n);return this.lexer.state.top=i,{type:"blockquote",raw:s[0],tokens:r,text:n}}}list(t){let s=this.rules.block.list.exec(t);if(s){let n=s[1].trim();const i=n.length>1,r={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const a=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let p="",c="",g=!1;for(;t;){let u=!1;if(!(s=a.exec(t))||this.rules.block.hr.test(t))break;p=s[0],t=t.substring(p.length);let f=s[2].split(`
`,1)[0].replace(/^\t+/,A=>" ".repeat(3*A.length)),d=t.split(`
`,1)[0],x=0;this.options.pedantic?(x=2,c=f.trimStart()):(x=s[2].search(/[^ ]/),x=x>4?1:x,c=f.slice(x),x+=s[1].length);let T=!1;if(!f&&/^ *$/.test(d)&&(p+=d+`
`,t=t.substring(d.length+1),u=!0),!u){const A=new RegExp(`^ {0,${Math.min(3,x-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),N=new RegExp(`^ {0,${Math.min(3,x-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),_=new RegExp(`^ {0,${Math.min(3,x-1)}}(?:\`\`\`|~~~)`),E=new RegExp(`^ {0,${Math.min(3,x-1)}}#`);for(;t;){const P=t.split(`
`,1)[0];if(d=P,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),_.test(d)||E.test(d)||A.test(d)||N.test(t))break;if(d.search(/[^ ]/)>=x||!d.trim())c+=`
`+d.slice(x);else{if(T||f.search(/[^ ]/)>=4||_.test(f)||E.test(f)||N.test(f))break;c+=`
`+d}!T&&!d.trim()&&(T=!0),p+=P+`
`,t=t.substring(P.length+1),f=d.slice(x)}}r.loose||(g?r.loose=!0:/\n *\n *$/.test(p)&&(g=!0));let b=null,j;this.options.gfm&&(b=/^\[[ xX]\] /.exec(c),b&&(j=b[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:p,task:!!b,checked:j,loose:!1,text:c,tokens:[]}),r.raw+=p}r.items[r.items.length-1].raw=p.trimEnd(),r.items[r.items.length-1].text=c.trimEnd(),r.raw=r.raw.trimEnd();for(let u=0;u<r.items.length;u++)if(this.lexer.state.top=!1,r.items[u].tokens=this.lexer.blockTokens(r.items[u].text,[]),!r.loose){const f=r.items[u].tokens.filter(x=>x.type==="space"),d=f.length>0&&f.some(x=>/\n.*\n/.test(x.raw));r.loose=d}if(r.loose)for(let u=0;u<r.items.length;u++)r.items[u].loose=!0;return r}}html(t){const s=this.rules.block.html.exec(t);if(s)return{type:"html",block:!0,raw:s[0],pre:s[1]==="pre"||s[1]==="script"||s[1]==="style",text:s[0]}}def(t){const s=this.rules.block.def.exec(t);if(s){const n=s[1].toLowerCase().replace(/\s+/g," "),i=s[2]?s[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=s[3]?s[3].substring(1,s[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):s[3];return{type:"def",tag:n,raw:s[0],href:i,title:r}}}table(t){const s=this.rules.block.table.exec(t);if(!s||!/[:|]/.test(s[2]))return;const n=gs(s[1]),i=s[2].replace(/^\||\| *$/g,"").split("|"),r=s[3]&&s[3].trim()?s[3].replace(/\n[ \t]*$/,"").split(`
`):[],a={type:"table",raw:s[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const p of i)/^ *-+: *$/.test(p)?a.align.push("right"):/^ *:-+: *$/.test(p)?a.align.push("center"):/^ *:-+ *$/.test(p)?a.align.push("left"):a.align.push(null);for(const p of n)a.header.push({text:p,tokens:this.lexer.inline(p)});for(const p of r)a.rows.push(gs(p,a.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return a}}lheading(t){const s=this.rules.block.lheading.exec(t);if(s)return{type:"heading",raw:s[0],depth:s[2].charAt(0)==="="?1:2,text:s[1],tokens:this.lexer.inline(s[1])}}paragraph(t){const s=this.rules.block.paragraph.exec(t);if(s){const n=s[1].charAt(s[1].length-1)===`
`?s[1].slice(0,-1):s[1];return{type:"paragraph",raw:s[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const s=this.rules.block.text.exec(t);if(s)return{type:"text",raw:s[0],text:s[0],tokens:this.lexer.inline(s[0])}}escape(t){const s=this.rules.inline.escape.exec(t);if(s)return{type:"escape",raw:s[0],text:ie(s[1])}}tag(t){const s=this.rules.inline.tag.exec(t);if(s)return!this.lexer.state.inLink&&/^<a /i.test(s[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(s[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:s[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:s[0]}}link(t){const s=this.rules.inline.link.exec(t);if(s){const n=s[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const a=at(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{const a=Dn(s[2],"()");if(a>-1){const c=(s[0].indexOf("!")===0?5:4)+s[1].length+a;s[2]=s[2].substring(0,a),s[0]=s[0].substring(0,c).trim(),s[3]=""}}let i=s[2],r="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);a&&(i=a[1],r=a[3])}else r=s[3]?s[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),xs(s,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},s[0],this.lexer)}}reflink(t,s){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const i=(n[2]||n[1]).replace(/\s+/g," "),r=s[i.toLowerCase()];if(!r){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return xs(n,r,n[0],this.lexer)}}emStrong(t,s,n=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const a=[...i[0]].length-1;let p,c,g=a,u=0;const f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,s=s.slice(-1*t.length+a);(i=f.exec(s))!=null;){if(p=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!p)continue;if(c=[...p].length,i[3]||i[4]){g+=c;continue}else if((i[5]||i[6])&&a%3&&!((a+c)%3)){u+=c;continue}if(g-=c,g>0)continue;c=Math.min(c,c+g+u);const d=[...i[0]][0].length,x=t.slice(0,a+i.index+d+c);if(Math.min(a,c)%2){const b=x.slice(1,-1);return{type:"em",raw:x,text:b,tokens:this.lexer.inlineTokens(b)}}const T=x.slice(2,-2);return{type:"strong",raw:x,text:T,tokens:this.lexer.inlineTokens(T)}}}}codespan(t){const s=this.rules.inline.code.exec(t);if(s){let n=s[2].replace(/\n/g," ");const i=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return i&&r&&(n=n.substring(1,n.length-1)),n=ie(n,!0),{type:"codespan",raw:s[0],text:n}}}br(t){const s=this.rules.inline.br.exec(t);if(s)return{type:"br",raw:s[0]}}del(t){const s=this.rules.inline.del.exec(t);if(s)return{type:"del",raw:s[0],text:s[2],tokens:this.lexer.inlineTokens(s[2])}}autolink(t){const s=this.rules.inline.autolink.exec(t);if(s){let n,i;return s[2]==="@"?(n=ie(s[1]),i="mailto:"+n):(n=ie(s[1]),i=n),{type:"link",raw:s[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let s;if(s=this.rules.inline.url.exec(t)){let i,r;if(s[2]==="@")i=ie(s[0]),r="mailto:"+i;else{let a;do a=s[0],s[0]=((n=this.rules.inline._backpedal.exec(s[0]))==null?void 0:n[0])??"";while(a!==s[0]);i=ie(s[0]),s[1]==="www."?r="http://"+s[0]:r=s[0]}return{type:"link",raw:s[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const s=this.rules.inline.text.exec(t);if(s){let n;return this.lexer.state.inRawBlock?n=s[0]:n=ie(s[0]),{type:"text",raw:s[0],text:n}}}}const Fn=/^(?: *(?:\n|$))+/,$n=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Un=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ze=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Bn=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Is=/(?:[*+-]|\d{1,9}[.)])/,Ls=O(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Is).getRegex(),Bt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Wn=/^[^\n]+/,Wt=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Hn=O(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Wt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Gn=O(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Is).getRegex(),mt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ht=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,qn=O("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Ht).replace("tag",mt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),zs=O(Bt).replace("hr",Ze).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mt).getRegex(),Zn=O(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",zs).getRegex(),Gt={blockquote:Zn,code:$n,def:Hn,fences:Un,heading:Bn,hr:Ze,html:qn,lheading:Ls,list:Gn,newline:Fn,paragraph:zs,table:Ge,text:Wn},ys=O("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ze).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mt).getRegex(),Yn={...Gt,table:ys,paragraph:O(Bt).replace("hr",Ze).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ys).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mt).getRegex()},Kn={...Gt,html:O(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ht).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ge,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:O(Bt).replace("hr",Ze).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ls).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ps=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Xn=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Os=/^( {2,}|\\)\n(?!\s*$)/,Vn=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ye="\\p{P}$+<=>`^|~",Jn=O(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ye).getRegex(),Qn=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,ei=O(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ye).getRegex(),ti=O("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ye).getRegex(),si=O("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ye).getRegex(),ni=O(/\\([punct])/,"gu").replace(/punct/g,Ye).getRegex(),ii=O(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ri=O(Ht).replace("(?:-->|$)","-->").getRegex(),ai=O("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ri).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ht=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,oi=O(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",ht).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ds=O(/^!?\[(label)\]\[(ref)\]/).replace("label",ht).replace("ref",Wt).getRegex(),Ms=O(/^!?\[(ref)\](?:\[\])?/).replace("ref",Wt).getRegex(),li=O("reflink|nolink(?!\\()","g").replace("reflink",Ds).replace("nolink",Ms).getRegex(),qt={_backpedal:Ge,anyPunctuation:ni,autolink:ii,blockSkip:Qn,br:Os,code:Xn,del:Ge,emStrongLDelim:ei,emStrongRDelimAst:ti,emStrongRDelimUnd:si,escape:Ps,link:oi,nolink:Ms,punctuation:Jn,reflink:Ds,reflinkSearch:li,tag:ai,text:Vn,url:Ge},ci={...qt,link:O(/^!?\[(label)\]\((.*?)\)/).replace("label",ht).getRegex(),reflink:O(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ht).getRegex()},zt={...qt,escape:O(Ps).replace("])","~|])").getRegex(),url:O(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},di={...zt,br:O(Os).replace("{2,}","*").getRegex(),text:O(zt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ot={normal:Gt,gfm:Yn,pedantic:Kn},Fe={normal:qt,gfm:zt,breaks:di,pedantic:ci};class me{constructor(t){U(this,"tokens");U(this,"options");U(this,"state");U(this,"tokenizer");U(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Te,this.options.tokenizer=this.options.tokenizer||new pt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const s={block:ot.normal,inline:Fe.normal};this.options.pedantic?(s.block=ot.pedantic,s.inline=Fe.pedantic):this.options.gfm&&(s.block=ot.gfm,this.options.breaks?s.inline=Fe.breaks:s.inline=Fe.gfm),this.tokenizer.rules=s}static get rules(){return{block:ot,inline:Fe}}static lex(t,s){return new me(s).lex(t)}static lexInline(t,s){return new me(s).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let s=0;s<this.inlineQueue.length;s++){const n=this.inlineQueue[s];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,s=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(p,c,g)=>c+"    ".repeat(g.length));let n,i,r,a;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(p=>(n=p.call({lexer:this},t,s))?(t=t.substring(n.raw.length),s.push(n),!0):!1))){if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length),n.raw.length===1&&s.length>0?s[s.length-1].raw+=`
`:s.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length),i=s[s.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length),i=s[s.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),s.push(n);continue}if(r=t,this.options.extensions&&this.options.extensions.startBlock){let p=1/0;const c=t.slice(1);let g;this.options.extensions.startBlock.forEach(u=>{g=u.call({lexer:this},c),typeof g=="number"&&g>=0&&(p=Math.min(p,g))}),p<1/0&&p>=0&&(r=t.substring(0,p+1))}if(this.state.top&&(n=this.tokenizer.paragraph(r))){i=s[s.length-1],a&&i.type==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(n),a=r.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length),i=s[s.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(n);continue}if(t){const p="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,s}inline(t,s=[]){return this.inlineQueue.push({src:t,tokens:s}),s}inlineTokens(t,s=[]){let n,i,r,a=t,p,c,g;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(p=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)u.includes(p[0].slice(p[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,p.index)+"["+"a".repeat(p[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(p=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,p.index)+"["+"a".repeat(p[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(p=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,p.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(c||(g=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(n=u.call({lexer:this},t,s))?(t=t.substring(n.raw.length),s.push(n),!0):!1))){if(n=this.tokenizer.escape(t)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.tag(t)){t=t.substring(n.raw.length),i=s[s.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):s.push(n);continue}if(n=this.tokenizer.link(t)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(n.raw.length),i=s[s.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):s.push(n);continue}if(n=this.tokenizer.emStrong(t,a,g)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.codespan(t)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.br(t)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.del(t)){t=t.substring(n.raw.length),s.push(n);continue}if(n=this.tokenizer.autolink(t)){t=t.substring(n.raw.length),s.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(t))){t=t.substring(n.raw.length),s.push(n);continue}if(r=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const f=t.slice(1);let d;this.options.extensions.startInline.forEach(x=>{d=x.call({lexer:this},f),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(r=t.substring(0,u+1))}if(n=this.tokenizer.inlineText(r)){t=t.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(g=n.raw.slice(-1)),c=!0,i=s[s.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):s.push(n);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return s}}class ut{constructor(t){U(this,"options");this.options=t||Te}code(t,s,n){var r;const i=(r=(s||"").match(/^\S*/))==null?void 0:r[0];return t=t.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+ie(i)+'">'+(n?t:ie(t,!0))+`</code></pre>
`:"<pre><code>"+(n?t:ie(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,s){return t}heading(t,s,n){return`<h${s}>${t}</h${s}>
`}hr(){return`<hr>
`}list(t,s,n){const i=s?"ol":"ul",r=s&&n!==1?' start="'+n+'"':"";return"<"+i+r+`>
`+t+"</"+i+`>
`}listitem(t,s,n){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,s){return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,s){const n=s.header?"th":"td";return(s.align?`<${n} align="${s.align}">`:`<${n}>`)+t+`</${n}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,s,n){const i=fs(t);if(i===null)return n;t=i;let r='<a href="'+t+'"';return s&&(r+=' title="'+s+'"'),r+=">"+n+"</a>",r}image(t,s,n){const i=fs(t);if(i===null)return n;t=i;let r=`<img src="${t}" alt="${n}"`;return s&&(r+=` title="${s}"`),r+=">",r}text(t){return t}}class Zt{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,s,n){return""+n}image(t,s,n){return""+n}br(){return""}}class fe{constructor(t){U(this,"options");U(this,"renderer");U(this,"textRenderer");this.options=t||Te,this.options.renderer=this.options.renderer||new ut,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Zt}static parse(t,s){return new fe(s).parse(t)}static parseInline(t,s){return new fe(s).parseInline(t)}parse(t,s=!0){let n="";for(let i=0;i<t.length;i++){const r=t[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const a=r,p=this.options.extensions.renderers[a.type].call({parser:this},a);if(p!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){n+=p||"";continue}}switch(r.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{const a=r;n+=this.renderer.heading(this.parseInline(a.tokens),a.depth,Pn(this.parseInline(a.tokens,this.textRenderer)));continue}case"code":{const a=r;n+=this.renderer.code(a.text,a.lang,!!a.escaped);continue}case"table":{const a=r;let p="",c="";for(let u=0;u<a.header.length;u++)c+=this.renderer.tablecell(this.parseInline(a.header[u].tokens),{header:!0,align:a.align[u]});p+=this.renderer.tablerow(c);let g="";for(let u=0;u<a.rows.length;u++){const f=a.rows[u];c="";for(let d=0;d<f.length;d++)c+=this.renderer.tablecell(this.parseInline(f[d].tokens),{header:!1,align:a.align[d]});g+=this.renderer.tablerow(c)}n+=this.renderer.table(p,g);continue}case"blockquote":{const a=r,p=this.parse(a.tokens);n+=this.renderer.blockquote(p);continue}case"list":{const a=r,p=a.ordered,c=a.start,g=a.loose;let u="";for(let f=0;f<a.items.length;f++){const d=a.items[f],x=d.checked,T=d.task;let b="";if(d.task){const j=this.renderer.checkbox(!!x);g?d.tokens.length>0&&d.tokens[0].type==="paragraph"?(d.tokens[0].text=j+" "+d.tokens[0].text,d.tokens[0].tokens&&d.tokens[0].tokens.length>0&&d.tokens[0].tokens[0].type==="text"&&(d.tokens[0].tokens[0].text=j+" "+d.tokens[0].tokens[0].text)):d.tokens.unshift({type:"text",text:j+" "}):b+=j+" "}b+=this.parse(d.tokens,g),u+=this.renderer.listitem(b,T,!!x)}n+=this.renderer.list(u,p,c);continue}case"html":{const a=r;n+=this.renderer.html(a.text,a.block);continue}case"paragraph":{const a=r;n+=this.renderer.paragraph(this.parseInline(a.tokens));continue}case"text":{let a=r,p=a.tokens?this.parseInline(a.tokens):a.text;for(;i+1<t.length&&t[i+1].type==="text";)a=t[++i],p+=`
`+(a.tokens?this.parseInline(a.tokens):a.text);n+=s?this.renderer.paragraph(p):p;continue}default:{const a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}parseInline(t,s){s=s||this.renderer;let n="";for(let i=0;i<t.length;i++){const r=t[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const a=this.options.extensions.renderers[r.type].call({parser:this},r);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=a||"";continue}}switch(r.type){case"escape":{const a=r;n+=s.text(a.text);break}case"html":{const a=r;n+=s.html(a.text);break}case"link":{const a=r;n+=s.link(a.href,a.title,this.parseInline(a.tokens,s));break}case"image":{const a=r;n+=s.image(a.href,a.title,a.text);break}case"strong":{const a=r;n+=s.strong(this.parseInline(a.tokens,s));break}case"em":{const a=r;n+=s.em(this.parseInline(a.tokens,s));break}case"codespan":{const a=r;n+=s.codespan(a.text);break}case"br":{n+=s.br();break}case"del":{const a=r;n+=s.del(this.parseInline(a.tokens,s));break}case"text":{const a=r;n+=s.text(a.text);break}default:{const a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}}class qe{constructor(t){U(this,"options");this.options=t||Te}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}U(qe,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Ae,Pt,Fs;class pi{constructor(...t){hs(this,Ae);U(this,"defaults",Ut());U(this,"options",this.setOptions);U(this,"parse",nt(this,Ae,Pt).call(this,me.lex,fe.parse));U(this,"parseInline",nt(this,Ae,Pt).call(this,me.lexInline,fe.parseInline));U(this,"Parser",fe);U(this,"Renderer",ut);U(this,"TextRenderer",Zt);U(this,"Lexer",me);U(this,"Tokenizer",pt);U(this,"Hooks",qe);this.use(...t)}walkTokens(t,s){var i,r;let n=[];for(const a of t)switch(n=n.concat(s.call(this,a)),a.type){case"table":{const p=a;for(const c of p.header)n=n.concat(this.walkTokens(c.tokens,s));for(const c of p.rows)for(const g of c)n=n.concat(this.walkTokens(g.tokens,s));break}case"list":{const p=a;n=n.concat(this.walkTokens(p.items,s));break}default:{const p=a;(r=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&r[p.type]?this.defaults.extensions.childTokens[p.type].forEach(c=>{const g=p[c].flat(1/0);n=n.concat(this.walkTokens(g,s))}):p.tokens&&(n=n.concat(this.walkTokens(p.tokens,s)))}}return n}use(...t){const s=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const a=s.renderers[r.name];a?s.renderers[r.name]=function(...p){let c=r.renderer.apply(this,p);return c===!1&&(c=a.apply(this,p)),c}:s.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=s[r.level];a?a.unshift(r.tokenizer):s[r.level]=[r.tokenizer],r.start&&(r.level==="block"?s.startBlock?s.startBlock.push(r.start):s.startBlock=[r.start]:r.level==="inline"&&(s.startInline?s.startInline.push(r.start):s.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(s.childTokens[r.name]=r.childTokens)}),i.extensions=s),n.renderer){const r=this.defaults.renderer||new ut(this.defaults);for(const a in n.renderer){if(!(a in r))throw new Error(`renderer '${a}' does not exist`);if(a==="options")continue;const p=a,c=n.renderer[p],g=r[p];r[p]=(...u)=>{let f=c.apply(r,u);return f===!1&&(f=g.apply(r,u)),f||""}}i.renderer=r}if(n.tokenizer){const r=this.defaults.tokenizer||new pt(this.defaults);for(const a in n.tokenizer){if(!(a in r))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const p=a,c=n.tokenizer[p],g=r[p];r[p]=(...u)=>{let f=c.apply(r,u);return f===!1&&(f=g.apply(r,u)),f}}i.tokenizer=r}if(n.hooks){const r=this.defaults.hooks||new qe;for(const a in n.hooks){if(!(a in r))throw new Error(`hook '${a}' does not exist`);if(a==="options")continue;const p=a,c=n.hooks[p],g=r[p];qe.passThroughHooks.has(a)?r[p]=u=>{if(this.defaults.async)return Promise.resolve(c.call(r,u)).then(d=>g.call(r,d));const f=c.call(r,u);return g.call(r,f)}:r[p]=(...u)=>{let f=c.apply(r,u);return f===!1&&(f=g.apply(r,u)),f}}i.hooks=r}if(n.walkTokens){const r=this.defaults.walkTokens,a=n.walkTokens;i.walkTokens=function(p){let c=[];return c.push(a.call(this,p)),r&&(c=c.concat(r.call(this,p))),c}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,s){return me.lex(t,s??this.defaults)}parser(t,s){return fe.parse(t,s??this.defaults)}}Ae=new WeakSet,Pt=function(t,s){return(n,i)=>{const r={...i},a={...this.defaults,...r};this.defaults.async===!0&&r.async===!1&&(a.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),a.async=!0);const p=nt(this,Ae,Fs).call(this,!!a.silent,!!a.async);if(typeof n>"u"||n===null)return p(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return p(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(c=>t(c,a)).then(c=>a.hooks?a.hooks.processAllTokens(c):c).then(c=>a.walkTokens?Promise.all(this.walkTokens(c,a.walkTokens)).then(()=>c):c).then(c=>s(c,a)).then(c=>a.hooks?a.hooks.postprocess(c):c).catch(p);try{a.hooks&&(n=a.hooks.preprocess(n));let c=t(n,a);a.hooks&&(c=a.hooks.processAllTokens(c)),a.walkTokens&&this.walkTokens(c,a.walkTokens);let g=s(c,a);return a.hooks&&(g=a.hooks.postprocess(g)),g}catch(c){return p(c)}}},Fs=function(t,s){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const i="<p>An error occurred:</p><pre>"+ie(n.message+"",!0)+"</pre>";return s?Promise.resolve(i):i}if(s)return Promise.reject(n);throw n}};const Se=new pi;function z(l,t){return Se.parse(l,t)}z.options=z.setOptions=function(l){return Se.setOptions(l),z.defaults=Se.defaults,Cs(z.defaults),z};z.getDefaults=Ut;z.defaults=Te;z.use=function(...l){return Se.use(...l),z.defaults=Se.defaults,Cs(z.defaults),z};z.walkTokens=function(l,t){return Se.walkTokens(l,t)};z.parseInline=Se.parseInline;z.Parser=fe;z.parser=fe.parse;z.Renderer=ut;z.TextRenderer=Zt;z.Lexer=me;z.lexer=me.lex;z.Tokenizer=pt;z.Hooks=qe;z.parse=z;z.options;z.setOptions;z.use;z.walkTokens;z.parseInline;fe.parse;me.lex;/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:$s,setPrototypeOf:bs,isFrozen:hi,getPrototypeOf:ui,getOwnPropertyDescriptor:mi}=Object;let{freeze:ee,seal:ae,create:Ot}=Object,{apply:Dt,construct:Mt}=typeof Reflect<"u"&&Reflect;ee||(ee=function(t){return t});ae||(ae=function(t){return t});Dt||(Dt=function(t,s){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return t.apply(s,i)});Mt||(Mt=function(t){for(var s=arguments.length,n=new Array(s>1?s-1:0),i=1;i<s;i++)n[i-1]=arguments[i];return new t(...n)});const lt=te(Array.prototype.forEach),fi=te(Array.prototype.lastIndexOf),js=te(Array.prototype.pop),$e=te(Array.prototype.push),gi=te(Array.prototype.splice),dt=te(String.prototype.toLowerCase),Nt=te(String.prototype.toString),Et=te(String.prototype.match),Ue=te(String.prototype.replace),xi=te(String.prototype.indexOf),yi=te(String.prototype.trim),oe=te(Object.prototype.hasOwnProperty),Q=te(RegExp.prototype.test),Be=bi(TypeError);function te(l){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var s=arguments.length,n=new Array(s>1?s-1:0),i=1;i<s;i++)n[i-1]=arguments[i];return Dt(l,t,n)}}function bi(l){return function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return Mt(l,s)}}function R(l,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dt;bs&&bs(l,null);let n=t.length;for(;n--;){let i=t[n];if(typeof i=="string"){const r=s(i);r!==i&&(hi(t)||(t[n]=r),i=r)}l[i]=!0}return l}function ji(l){for(let t=0;t<l.length;t++)oe(l,t)||(l[t]=null);return l}function he(l){const t=Ot(null);for(const[s,n]of $s(l))oe(l,s)&&(Array.isArray(n)?t[s]=ji(n):n&&typeof n=="object"&&n.constructor===Object?t[s]=he(n):t[s]=n);return t}function We(l,t){for(;l!==null;){const n=mi(l,t);if(n){if(n.get)return te(n.get);if(typeof n.value=="function")return te(n.value)}l=ui(l)}function s(){return null}return s}const ws=ee(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ct=ee(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),_t=ee(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wi=ee(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Rt=ee(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ki=ee(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ks=ee(["#text"]),vs=ee(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),It=ee(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ss=ee(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ct=ee(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vi=ae(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Si=ae(/<%[\w\W]*|[\w\W]*%>/gm),Ai=ae(/\$\{[\w\W]*/gm),Ti=ae(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ni=ae(/^aria-[\-\w]+$/),Us=ae(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ei=ae(/^(?:\w+script|data):/i),Ci=ae(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Bs=ae(/^html$/i),_i=ae(/^[a-z][.\w]*(-[.\w]+)+$/i);var As=Object.freeze({__proto__:null,ARIA_ATTR:Ni,ATTR_WHITESPACE:Ci,CUSTOM_ELEMENT:_i,DATA_ATTR:Ti,DOCTYPE_NAME:Bs,ERB_EXPR:Si,IS_ALLOWED_URI:Us,IS_SCRIPT_OR_DATA:Ei,MUSTACHE_EXPR:vi,TMPLIT_EXPR:Ai});const He={element:1,text:3,progressingInstruction:7,comment:8,document:9},Ri=function(){return typeof window>"u"?null:window},Ii=function(t,s){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";s&&s.hasAttribute(i)&&(n=s.getAttribute(i));const r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},Ts=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ws(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ri();const t=k=>Ws(k);if(t.version="3.3.1",t.removed=[],!l||!l.document||l.document.nodeType!==He.document||!l.Element)return t.isSupported=!1,t;let{document:s}=l;const n=s,i=n.currentScript,{DocumentFragment:r,HTMLTemplateElement:a,Node:p,Element:c,NodeFilter:g,NamedNodeMap:u=l.NamedNodeMap||l.MozNamedAttrMap,HTMLFormElement:f,DOMParser:d,trustedTypes:x}=l,T=c.prototype,b=We(T,"cloneNode"),j=We(T,"remove"),A=We(T,"nextSibling"),N=We(T,"childNodes"),_=We(T,"parentNode");if(typeof a=="function"){const k=s.createElement("template");k.content&&k.content.ownerDocument&&(s=k.content.ownerDocument)}let E,P="";const{implementation:re,createNodeIterator:D,createDocumentFragment:F,getElementsByTagName:X}=s,{importNode:Z}=n;let $=Ts();t.isSupported=typeof $s=="function"&&typeof _=="function"&&re&&re.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:le,ERB_EXPR:be,TMPLIT_EXPR:je,DATA_ATTR:M,ARIA_ATTR:W,IS_SCRIPT_OR_DATA:ft,ATTR_WHITESPACE:ze,CUSTOM_ELEMENT:gt}=As;let{IS_ALLOWED_URI:Ke}=As,h=null;const S=R({},[...ws,...Ct,..._t,...Rt,...ks]);let v=null;const I=R({},[...vs,...It,...Ss,...ct]);let C=Object.seal(Ot(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),L=null,we=null;const G=Object.seal(Ot(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let J=!0,ne=!0,Pe=!1,Oe=!0,ce=!1,Xe=!0,ke=!1,xt=!1,yt=!1,Ne=!1,Ve=!1,Je=!1,Yt=!0,Kt=!1;const Hs="user-content-";let bt=!0,De=!1,Ee={},de=null;const jt=R({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Xt=null;const Vt=R({},["audio","video","img","source","image","track"]);let wt=null;const Jt=R({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qe="http://www.w3.org/1998/Math/MathML",et="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let Ce=ge,kt=!1,vt=null;const Gs=R({},[Qe,et,ge],Nt);let tt=R({},["mi","mo","mn","ms","mtext"]),st=R({},["annotation-xml"]);const qs=R({},["title","style","font","a","script"]);let Me=null;const Zs=["application/xhtml+xml","text/html"],Ys="text/html";let q=null,_e=null;const Ks=s.createElement("form"),Qt=function(o){return o instanceof RegExp||o instanceof Function},St=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(_e&&_e===o)){if((!o||typeof o!="object")&&(o={}),o=he(o),Me=Zs.indexOf(o.PARSER_MEDIA_TYPE)===-1?Ys:o.PARSER_MEDIA_TYPE,q=Me==="application/xhtml+xml"?Nt:dt,h=oe(o,"ALLOWED_TAGS")?R({},o.ALLOWED_TAGS,q):S,v=oe(o,"ALLOWED_ATTR")?R({},o.ALLOWED_ATTR,q):I,vt=oe(o,"ALLOWED_NAMESPACES")?R({},o.ALLOWED_NAMESPACES,Nt):Gs,wt=oe(o,"ADD_URI_SAFE_ATTR")?R(he(Jt),o.ADD_URI_SAFE_ATTR,q):Jt,Xt=oe(o,"ADD_DATA_URI_TAGS")?R(he(Vt),o.ADD_DATA_URI_TAGS,q):Vt,de=oe(o,"FORBID_CONTENTS")?R({},o.FORBID_CONTENTS,q):jt,L=oe(o,"FORBID_TAGS")?R({},o.FORBID_TAGS,q):he({}),we=oe(o,"FORBID_ATTR")?R({},o.FORBID_ATTR,q):he({}),Ee=oe(o,"USE_PROFILES")?o.USE_PROFILES:!1,J=o.ALLOW_ARIA_ATTR!==!1,ne=o.ALLOW_DATA_ATTR!==!1,Pe=o.ALLOW_UNKNOWN_PROTOCOLS||!1,Oe=o.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ce=o.SAFE_FOR_TEMPLATES||!1,Xe=o.SAFE_FOR_XML!==!1,ke=o.WHOLE_DOCUMENT||!1,Ne=o.RETURN_DOM||!1,Ve=o.RETURN_DOM_FRAGMENT||!1,Je=o.RETURN_TRUSTED_TYPE||!1,yt=o.FORCE_BODY||!1,Yt=o.SANITIZE_DOM!==!1,Kt=o.SANITIZE_NAMED_PROPS||!1,bt=o.KEEP_CONTENT!==!1,De=o.IN_PLACE||!1,Ke=o.ALLOWED_URI_REGEXP||Us,Ce=o.NAMESPACE||ge,tt=o.MATHML_TEXT_INTEGRATION_POINTS||tt,st=o.HTML_INTEGRATION_POINTS||st,C=o.CUSTOM_ELEMENT_HANDLING||{},o.CUSTOM_ELEMENT_HANDLING&&Qt(o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(C.tagNameCheck=o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),o.CUSTOM_ELEMENT_HANDLING&&Qt(o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(C.attributeNameCheck=o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),o.CUSTOM_ELEMENT_HANDLING&&typeof o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(C.allowCustomizedBuiltInElements=o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ce&&(ne=!1),Ve&&(Ne=!0),Ee&&(h=R({},ks),v=[],Ee.html===!0&&(R(h,ws),R(v,vs)),Ee.svg===!0&&(R(h,Ct),R(v,It),R(v,ct)),Ee.svgFilters===!0&&(R(h,_t),R(v,It),R(v,ct)),Ee.mathMl===!0&&(R(h,Rt),R(v,Ss),R(v,ct))),o.ADD_TAGS&&(typeof o.ADD_TAGS=="function"?G.tagCheck=o.ADD_TAGS:(h===S&&(h=he(h)),R(h,o.ADD_TAGS,q))),o.ADD_ATTR&&(typeof o.ADD_ATTR=="function"?G.attributeCheck=o.ADD_ATTR:(v===I&&(v=he(v)),R(v,o.ADD_ATTR,q))),o.ADD_URI_SAFE_ATTR&&R(wt,o.ADD_URI_SAFE_ATTR,q),o.FORBID_CONTENTS&&(de===jt&&(de=he(de)),R(de,o.FORBID_CONTENTS,q)),o.ADD_FORBID_CONTENTS&&(de===jt&&(de=he(de)),R(de,o.ADD_FORBID_CONTENTS,q)),bt&&(h["#text"]=!0),ke&&R(h,["html","head","body"]),h.table&&(R(h,["tbody"]),delete L.tbody),o.TRUSTED_TYPES_POLICY){if(typeof o.TRUSTED_TYPES_POLICY.createHTML!="function")throw Be('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof o.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Be('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=o.TRUSTED_TYPES_POLICY,P=E.createHTML("")}else E===void 0&&(E=Ii(x,i)),E!==null&&typeof P=="string"&&(P=E.createHTML(""));ee&&ee(o),_e=o}},es=R({},[...Ct,..._t,...wi]),ts=R({},[...Rt,...ki]),Xs=function(o){let m=_(o);(!m||!m.tagName)&&(m={namespaceURI:Ce,tagName:"template"});const y=dt(o.tagName),B=dt(m.tagName);return vt[o.namespaceURI]?o.namespaceURI===et?m.namespaceURI===ge?y==="svg":m.namespaceURI===Qe?y==="svg"&&(B==="annotation-xml"||tt[B]):!!es[y]:o.namespaceURI===Qe?m.namespaceURI===ge?y==="math":m.namespaceURI===et?y==="math"&&st[B]:!!ts[y]:o.namespaceURI===ge?m.namespaceURI===et&&!st[B]||m.namespaceURI===Qe&&!tt[B]?!1:!ts[y]&&(qs[y]||!es[y]):!!(Me==="application/xhtml+xml"&&vt[o.namespaceURI]):!1},pe=function(o){$e(t.removed,{element:o});try{_(o).removeChild(o)}catch{j(o)}},ve=function(o,m){try{$e(t.removed,{attribute:m.getAttributeNode(o),from:m})}catch{$e(t.removed,{attribute:null,from:m})}if(m.removeAttribute(o),o==="is")if(Ne||Ve)try{pe(m)}catch{}else try{m.setAttribute(o,"")}catch{}},ss=function(o){let m=null,y=null;if(yt)o="<remove></remove>"+o;else{const H=Et(o,/^[\r\n\t ]+/);y=H&&H[0]}Me==="application/xhtml+xml"&&Ce===ge&&(o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+o+"</body></html>");const B=E?E.createHTML(o):o;if(Ce===ge)try{m=new d().parseFromString(B,Me)}catch{}if(!m||!m.documentElement){m=re.createDocument(Ce,"template",null);try{m.documentElement.innerHTML=kt?P:B}catch{}}const V=m.body||m.documentElement;return o&&y&&V.insertBefore(s.createTextNode(y),V.childNodes[0]||null),Ce===ge?X.call(m,ke?"html":"body")[0]:ke?m.documentElement:V},ns=function(o){return D.call(o.ownerDocument||o,o,g.SHOW_ELEMENT|g.SHOW_COMMENT|g.SHOW_TEXT|g.SHOW_PROCESSING_INSTRUCTION|g.SHOW_CDATA_SECTION,null)},At=function(o){return o instanceof f&&(typeof o.nodeName!="string"||typeof o.textContent!="string"||typeof o.removeChild!="function"||!(o.attributes instanceof u)||typeof o.removeAttribute!="function"||typeof o.setAttribute!="function"||typeof o.namespaceURI!="string"||typeof o.insertBefore!="function"||typeof o.hasChildNodes!="function")},is=function(o){return typeof p=="function"&&o instanceof p};function xe(k,o,m){lt(k,y=>{y.call(t,o,m,_e)})}const rs=function(o){let m=null;if(xe($.beforeSanitizeElements,o,null),At(o))return pe(o),!0;const y=q(o.nodeName);if(xe($.uponSanitizeElement,o,{tagName:y,allowedTags:h}),Xe&&o.hasChildNodes()&&!is(o.firstElementChild)&&Q(/<[/\w!]/g,o.innerHTML)&&Q(/<[/\w!]/g,o.textContent)||o.nodeType===He.progressingInstruction||Xe&&o.nodeType===He.comment&&Q(/<[/\w]/g,o.data))return pe(o),!0;if(!(G.tagCheck instanceof Function&&G.tagCheck(y))&&(!h[y]||L[y])){if(!L[y]&&os(y)&&(C.tagNameCheck instanceof RegExp&&Q(C.tagNameCheck,y)||C.tagNameCheck instanceof Function&&C.tagNameCheck(y)))return!1;if(bt&&!de[y]){const B=_(o)||o.parentNode,V=N(o)||o.childNodes;if(V&&B){const H=V.length;for(let se=H-1;se>=0;--se){const ye=b(V[se],!0);ye.__removalCount=(o.__removalCount||0)+1,B.insertBefore(ye,A(o))}}}return pe(o),!0}return o instanceof c&&!Xs(o)||(y==="noscript"||y==="noembed"||y==="noframes")&&Q(/<\/no(script|embed|frames)/i,o.innerHTML)?(pe(o),!0):(ce&&o.nodeType===He.text&&(m=o.textContent,lt([le,be,je],B=>{m=Ue(m,B," ")}),o.textContent!==m&&($e(t.removed,{element:o.cloneNode()}),o.textContent=m)),xe($.afterSanitizeElements,o,null),!1)},as=function(o,m,y){if(Yt&&(m==="id"||m==="name")&&(y in s||y in Ks))return!1;if(!(ne&&!we[m]&&Q(M,m))){if(!(J&&Q(W,m))){if(!(G.attributeCheck instanceof Function&&G.attributeCheck(m,o))){if(!v[m]||we[m]){if(!(os(o)&&(C.tagNameCheck instanceof RegExp&&Q(C.tagNameCheck,o)||C.tagNameCheck instanceof Function&&C.tagNameCheck(o))&&(C.attributeNameCheck instanceof RegExp&&Q(C.attributeNameCheck,m)||C.attributeNameCheck instanceof Function&&C.attributeNameCheck(m,o))||m==="is"&&C.allowCustomizedBuiltInElements&&(C.tagNameCheck instanceof RegExp&&Q(C.tagNameCheck,y)||C.tagNameCheck instanceof Function&&C.tagNameCheck(y))))return!1}else if(!wt[m]){if(!Q(Ke,Ue(y,ze,""))){if(!((m==="src"||m==="xlink:href"||m==="href")&&o!=="script"&&xi(y,"data:")===0&&Xt[o])){if(!(Pe&&!Q(ft,Ue(y,ze,"")))){if(y)return!1}}}}}}}return!0},os=function(o){return o!=="annotation-xml"&&Et(o,gt)},ls=function(o){xe($.beforeSanitizeAttributes,o,null);const{attributes:m}=o;if(!m||At(o))return;const y={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:v,forceKeepAttr:void 0};let B=m.length;for(;B--;){const V=m[B],{name:H,namespaceURI:se,value:ye}=V,Re=q(H),Tt=ye;let Y=H==="value"?Tt:yi(Tt);if(y.attrName=Re,y.attrValue=Y,y.keepAttr=!0,y.forceKeepAttr=void 0,xe($.uponSanitizeAttribute,o,y),Y=y.attrValue,Kt&&(Re==="id"||Re==="name")&&(ve(H,o),Y=Hs+Y),Xe&&Q(/((--!?|])>)|<\/(style|title|textarea)/i,Y)){ve(H,o);continue}if(Re==="attributename"&&Et(Y,"href")){ve(H,o);continue}if(y.forceKeepAttr)continue;if(!y.keepAttr){ve(H,o);continue}if(!Oe&&Q(/\/>/i,Y)){ve(H,o);continue}ce&&lt([le,be,je],ds=>{Y=Ue(Y,ds," ")});const cs=q(o.nodeName);if(!as(cs,Re,Y)){ve(H,o);continue}if(E&&typeof x=="object"&&typeof x.getAttributeType=="function"&&!se)switch(x.getAttributeType(cs,Re)){case"TrustedHTML":{Y=E.createHTML(Y);break}case"TrustedScriptURL":{Y=E.createScriptURL(Y);break}}if(Y!==Tt)try{se?o.setAttributeNS(se,H,Y):o.setAttribute(H,Y),At(o)?pe(o):js(t.removed)}catch{ve(H,o)}}xe($.afterSanitizeAttributes,o,null)},Vs=function k(o){let m=null;const y=ns(o);for(xe($.beforeSanitizeShadowDOM,o,null);m=y.nextNode();)xe($.uponSanitizeShadowNode,m,null),rs(m),ls(m),m.content instanceof r&&k(m.content);xe($.afterSanitizeShadowDOM,o,null)};return t.sanitize=function(k){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=null,y=null,B=null,V=null;if(kt=!k,kt&&(k="<!-->"),typeof k!="string"&&!is(k))if(typeof k.toString=="function"){if(k=k.toString(),typeof k!="string")throw Be("dirty is not a string, aborting")}else throw Be("toString is not a function");if(!t.isSupported)return k;if(xt||St(o),t.removed=[],typeof k=="string"&&(De=!1),De){if(k.nodeName){const ye=q(k.nodeName);if(!h[ye]||L[ye])throw Be("root node is forbidden and cannot be sanitized in-place")}}else if(k instanceof p)m=ss("<!---->"),y=m.ownerDocument.importNode(k,!0),y.nodeType===He.element&&y.nodeName==="BODY"||y.nodeName==="HTML"?m=y:m.appendChild(y);else{if(!Ne&&!ce&&!ke&&k.indexOf("<")===-1)return E&&Je?E.createHTML(k):k;if(m=ss(k),!m)return Ne?null:Je?P:""}m&&yt&&pe(m.firstChild);const H=ns(De?k:m);for(;B=H.nextNode();)rs(B),ls(B),B.content instanceof r&&Vs(B.content);if(De)return k;if(Ne){if(Ve)for(V=F.call(m.ownerDocument);m.firstChild;)V.appendChild(m.firstChild);else V=m;return(v.shadowroot||v.shadowrootmode)&&(V=Z.call(n,V,!0)),V}let se=ke?m.outerHTML:m.innerHTML;return ke&&h["!doctype"]&&m.ownerDocument&&m.ownerDocument.doctype&&m.ownerDocument.doctype.name&&Q(Bs,m.ownerDocument.doctype.name)&&(se="<!DOCTYPE "+m.ownerDocument.doctype.name+`>
`+se),ce&&lt([le,be,je],ye=>{se=Ue(se,ye," ")}),E&&Je?E.createHTML(se):se},t.setConfig=function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};St(k),xt=!0},t.clearConfig=function(){_e=null,xt=!1},t.isValidAttribute=function(k,o,m){_e||St({});const y=q(k),B=q(o);return as(y,B,m)},t.addHook=function(k,o){typeof o=="function"&&$e($[k],o)},t.removeHook=function(k,o){if(o!==void 0){const m=fi($[k],o);return m===-1?void 0:gi($[k],m,1)[0]}return js($[k])},t.removeHooks=function(k){$[k]=[]},t.removeAllHooks=function(){$=Ts()},t}var Ns=Ws();function Li({aiAdvice:l}){const[t,s]=w.useState([]),[n,i]=w.useState(""),[r,a]=w.useState(!1),p=w.useRef(null);w.useEffect(()=>{z.setOptions({breaks:!0,gfm:!0,headerIds:!0,mangle:!1})},[]);const c=()=>{var d;(d=p.current)==null||d.scrollIntoView({behavior:"smooth"})};w.useEffect(()=>{c()},[t]);const g=d=>{if(!d)return"";try{const x=z(d);return Ns.sanitize(x)}catch(x){return console.error("Markdown rendering error:",x),Ns.sanitize(d.replace(/\n/g,"<br>"))}},u=async()=>{if(!n.trim()||r)return;const d=n.trim();i("");const x={id:Date.now(),type:"user",content:d,timestamp:new Date};s(T=>[...T,x]),a(!0);try{const T=localStorage.getItem("authToken");console.log("Sending message to chatbot:",d);const b=await fetch("/api/gemini-query",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({question:d,context:!0})});console.log("Response status:",b.status);const j=await b.json();if(console.log("Response data:",j),j.success&&j.answer){console.log("Creating AI message with content length:",j.answer.length);const A={id:Date.now()+1,type:"ai",content:j.answer,timestamp:new Date,model:j.model};console.log("Adding AI message to state"),s(N=>[...N,A]),console.log("AI message added successfully")}else throw new Error(j.message||"Failed to get response")}catch(T){console.error("Chatbot error:",T);let b="Sorry, I encountered an error. ";T.message.includes("Failed to fetch")?b+="Cannot connect to the server. Please ensure the backend is running on port 3000.":T.message.includes("Gemini")?b+="The Gemini API is not configured. Please add GEMINI_API_KEY to the backend .env file.":b+=T.message||"Please try again.";const j={id:Date.now()+1,type:"error",content:b,timestamp:new Date};s(A=>[...A,j])}finally{a(!1)}},f=d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),d.stopPropagation(),u())};return e.jsxs("div",{id:"aiAssistantContent",style:{display:"block"},children:[l&&e.jsxs("div",{className:"section-card",style:{marginBottom:"24px"},children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-lightbulb"})," AI-Powered Recommendations"]})}),e.jsx("div",{className:"ai-recommendations-content",style:{background:"#f8f9fa",padding:"20px",borderRadius:"8px",lineHeight:"1.8"},dangerouslySetInnerHTML:{__html:g(l)}})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-robot"})," AI Assistant Chatbot"]}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#6c757d",margin:"8px 0 0 0"},children:"Ask me anything about AWS cost optimization, your infrastructure, or cloud best practices"})]}),e.jsxs("div",{className:"chat-messages",style:{height:"400px",overflowY:"auto",padding:"20px",background:"#f8f9fa",borderRadius:"8px",marginBottom:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:[t.length===0?e.jsxs("div",{style:{textAlign:"center",color:"#6c757d",padding:"40px 20px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[e.jsx("i",{className:"fa-solid fa-comments",style:{fontSize:"3rem",opacity:.3}}),e.jsx("p",{style:{margin:0},children:"Start a conversation! Ask me about:"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"8px",width:"100%",maxWidth:"600px"},children:[e.jsx("button",{onClick:()=>i("How can I reduce my AWS costs?"),style:{padding:"10px 16px",background:"white",border:"1px solid #dee2e6",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",transition:"all 0.2s"},onMouseOver:d=>d.target.style.background="#e9ecef",onMouseOut:d=>d.target.style.background="white",children:"💰 Reduce AWS costs"}),e.jsx("button",{onClick:()=>i("What are Reserved Instances?"),style:{padding:"10px 16px",background:"white",border:"1px solid #dee2e6",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",transition:"all 0.2s"},onMouseOver:d=>d.target.style.background="#e9ecef",onMouseOut:d=>d.target.style.background="white",children:"📊 Reserved Instances"}),e.jsx("button",{onClick:()=>i("Best practices for EC2 optimization"),style:{padding:"10px 16px",background:"white",border:"1px solid #dee2e6",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",transition:"all 0.2s"},onMouseOver:d=>d.target.style.background="#e9ecef",onMouseOut:d=>d.target.style.background="white",children:"⚡ EC2 optimization"})]})]}):t.map(d=>e.jsx("div",{style:{display:"flex",justifyContent:d.type==="user"?"flex-end":"flex-start",animation:"fadeIn 0.3s ease-in"},children:e.jsxs("div",{style:{maxWidth:"75%",padding:"12px 16px",borderRadius:"12px",background:d.type==="user"?"linear-gradient(135deg, #FF9900 0%, #FFB84D 100%)":d.type==="error"?"#fee":"white",color:d.type==="user"?"white":"#333",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",position:"relative"},children:[d.type==="ai"&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"#FF9900",marginBottom:"6px",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("i",{className:"fa-solid fa-robot"}),"AI Assistant ",d.model&&`(${d.model})`]}),d.type==="user"&&e.jsxs("div",{style:{fontSize:"0.75rem",opacity:.9,marginBottom:"6px",fontWeight:600,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("i",{className:"fa-solid fa-user"}),"You"]}),e.jsx("div",{className:"message-content",style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:d.type==="ai"?e.jsx("div",{dangerouslySetInnerHTML:{__html:g(d.content)}}):d.content}),e.jsx("div",{style:{fontSize:"0.7rem",opacity:.7,marginTop:"6px",textAlign:"right"},children:d.timestamp.toLocaleTimeString()})]})},d.id)),r&&e.jsx("div",{style:{display:"flex",justifyContent:"flex-start"},children:e.jsxs("div",{style:{padding:"12px 16px",borderRadius:"12px",background:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("i",{className:"fa-solid fa-robot",style:{color:"#FF9900"}}),e.jsxs("div",{className:"typing-indicator",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})]})}),e.jsx("div",{ref:p})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[e.jsx("textarea",{value:n,onChange:d=>i(d.target.value),onKeyDown:f,placeholder:"Ask me anything about AWS cost optimization...",disabled:r,style:{flex:1,padding:"12px 16px",borderRadius:"8px",border:"2px solid #dee2e6",fontSize:"1rem",resize:"none",minHeight:"50px",maxHeight:"120px",fontFamily:"inherit",transition:"border-color 0.2s",outline:"none"},onFocus:d=>d.target.style.borderColor="#FF9900",onBlur:d=>d.target.style.borderColor="#dee2e6"}),e.jsx("button",{onClick:u,disabled:!n.trim()||r,style:{padding:"12px 24px",background:n.trim()&&!r?"linear-gradient(135deg, #FF9900 0%, #FFB84D 100%)":"#dee2e6",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:600,cursor:n.trim()&&!r?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s",minHeight:"50px"},onMouseOver:d=>{n.trim()&&!r&&(d.target.style.transform="translateY(-2px)",d.target.style.boxShadow="0 4px 12px rgba(255, 153, 0, 0.4)")},onMouseOut:d=>{d.target.style.transform="translateY(0)",d.target.style.boxShadow="none"},children:r?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Thinking..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-paper-plane"}),"Send"]})})]})]})]})}tn.register(sn,nn,rn,an,on,ln,cn,dn,pn);function zi({history:l}){const[t,s]=w.useState(null),[n,i]=w.useState(null),[r,a]=w.useState([]);w.useEffect(()=>{(async()=>{try{const f=localStorage.getItem("authToken"),x=await(await fetch("/api/activity-logs?limit=50",{headers:{Authorization:`Bearer ${f}`}})).json();x.success&&a(x.logs)}catch(f){console.error("Failed to fetch activity logs:",f)}})()},[]),w.useEffect(()=>{l&&l.length>0&&p(l)},[l]);const p=u=>{var Z,$,le,be,je;const f=[...u].sort((M,W)=>new Date(M.timestamp||M.analyzedAt)-new Date(W.timestamp||W.analyzedAt)),d=f.map(M=>Es(M.timestamp||M.analyzedAt)),x=f.map(M=>M.totalMonthlyCost||0),T=f.map(M=>M.savingsOpportunities||0),b=f.map(M=>M.totalInstances||0),j=f.map(M=>{var W;return((W=M.underutilizedEC2)==null?void 0:W.length)||0}),A=f.map(M=>{var W;return((W=M.underutilizedEBS)==null?void 0:W.length)||0}),N=x.reduce((M,W)=>M+W,0)/x.length,_=Math.max(...x),E=Math.min(...x),P=T.reduce((M,W)=>M+W,0),re=P/T.length,D=x[x.length-1],F=x.length>1?x[x.length-2]:D,X=((D-F)/F*100).toFixed(1);i({avgCost:N,maxCost:_,minCost:E,totalSavings:P,avgSavings:re,latestCost:D,costTrend:X,dataPoints:f.length}),s({labels:d,costTrendData:{labels:d,datasets:[{label:"Monthly Cost",data:x,borderColor:"rgb(255, 153, 0)",backgroundColor:"rgba(255, 153, 0, 0.1)",tension:.4,fill:!0},{label:"Potential Savings",data:T,borderColor:"rgb(39, 174, 96)",backgroundColor:"rgba(39, 174, 96, 0.1)",tension:.4,fill:!0}]},resourceTrendData:{labels:d,datasets:[{label:"Total Instances",data:b,backgroundColor:"rgba(102, 126, 234, 0.7)"},{label:"Underutilized EC2",data:j,backgroundColor:"rgba(243, 156, 18, 0.7)"},{label:"Underutilized EBS",data:A,backgroundColor:"rgba(231, 76, 60, 0.7)"}]},savingsDistribution:{labels:["EC2 Savings","EBS Savings","Other Opportunities"],datasets:[{data:[(($=(Z=f[f.length-1])==null?void 0:Z.underutilizedEC2)==null?void 0:$.reduce((M,W)=>M+(W.estimatedSavings||35),0))||0,((be=(le=f[f.length-1])==null?void 0:le.underutilizedEBS)==null?void 0:be.reduce((M,W)=>M+(W.estimatedSavings||15),0))||0,(((je=f[f.length-1])==null?void 0:je.savingsOpportunities)||0)*.2],backgroundColor:["rgba(255, 153, 0, 0.8)","rgba(52, 152, 219, 0.8)","rgba(39, 174, 96, 0.8)"],borderColor:["rgb(255, 153, 0)","rgb(52, 152, 219)","rgb(39, 174, 96)"],borderWidth:2}]}})},c={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{family:"Poppins",size:12}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{family:"Poppins",size:14},bodyFont:{family:"Poppins",size:12}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{family:"Poppins"}}},x:{grid:{display:!1},ticks:{font:{family:"Poppins"}}}}},g={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{family:"Poppins",size:12},padding:15}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,callbacks:{label:function(u){return u.label+": "+ue(u.parsed)}}}}};return!l||l.length===0?e.jsx("div",{id:"historicalTrendsContent",style:{display:"block"},children:e.jsxs("div",{className:"section-card",style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx("i",{className:"fa-solid fa-chart-line",style:{fontSize:"3rem",color:"#FF9900",marginBottom:"20px"}}),e.jsx("h2",{style:{marginBottom:"15px"},children:"No Historical Data"}),e.jsx("p",{style:{color:"#666"},children:"Run multiple analyses over time to see cost trends and patterns"})]})}):e.jsxs("div",{id:"historicalTrendsContent",style:{display:"block"},children:[n&&e.jsxs("div",{className:"section-card",style:{marginBottom:"24px"},children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-chart-bar"})," Cost Statistics"]})}),e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-box primary",children:[e.jsx("div",{className:"metric-label",children:"Average Cost"}),e.jsx("div",{className:"metric-value",children:ue(n.avgCost)}),e.jsxs("div",{className:"metric-change",children:["Across ",n.dataPoints," analyses"]})]}),e.jsxs("div",{className:"metric-box success",children:[e.jsx("div",{className:"metric-label",children:"Total Savings Identified"}),e.jsx("div",{className:"metric-value",children:ue(n.totalSavings)}),e.jsxs("div",{className:"metric-change",children:["Average: ",ue(n.avgSavings),"/month"]})]}),e.jsxs("div",{className:"metric-box warning",children:[e.jsx("div",{className:"metric-label",children:"Cost Trend"}),e.jsxs("div",{className:"metric-value",children:[n.costTrend>0?"+":"",n.costTrend,"%"]}),e.jsx("div",{className:"metric-change",children:n.costTrend>0?"📈 Increasing":n.costTrend<0?"📉 Decreasing":"➡️ Stable"})]}),e.jsxs("div",{className:"metric-box info",children:[e.jsx("div",{className:"metric-label",children:"Peak Cost"}),e.jsx("div",{className:"metric-value",children:ue(n.maxCost)}),e.jsxs("div",{className:"metric-change",children:["Lowest: ",ue(n.minCost)]})]})]})]}),t&&e.jsxs("div",{className:"section-card",style:{marginBottom:"24px"},children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-chart-line"})," Cost Trends Over Time"]})}),e.jsx("div",{style:{height:"350px",padding:"20px"},children:e.jsx(hn,{data:t.costTrendData,options:c})})]}),t&&e.jsxs("div",{className:"section-card",style:{marginBottom:"24px"},children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-server"})," Resource Utilization Trends"]})}),e.jsx("div",{style:{height:"350px",padding:"20px"},children:e.jsx(un,{data:t.resourceTrendData,options:c})})]}),t&&e.jsxs("div",{className:"section-card",children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-chart-pie"})," Savings Opportunities Distribution"]})}),e.jsx("div",{style:{height:"350px",padding:"20px",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("div",{style:{maxWidth:"400px",width:"100%",height:"100%"},children:e.jsx(mn,{data:t.savingsDistribution,options:g})})})]}),e.jsxs("div",{className:"section-card",style:{marginTop:"24px"},children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-clock-rotate-left"})," Work Performance History"]})}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",width:"20%"},children:"Time"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",width:"25%"},children:"Action"}),e.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Details"})]})}),e.jsx("tbody",{children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",style:{padding:"20px",textAlign:"center",color:"#6c757d"},children:"No recent activity recorded."})}):r.map((u,f)=>e.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6",transition:"background 0.2s"},onMouseOver:d=>d.currentTarget.style.background="#f8f9fa",onMouseOut:d=>d.currentTarget.style.background="transparent",children:[e.jsx("td",{style:{padding:"12px",color:"#6c757d",fontSize:"0.85rem"},children:new Date(u.timestamp).toLocaleString()}),e.jsx("td",{style:{padding:"12px",fontWeight:600},children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"8px"},children:[u.action.toLowerCase().includes("stop")&&e.jsx("i",{className:"fa-solid fa-stop-circle",style:{color:"#dc3545"}}),u.action.toLowerCase().includes("email")&&e.jsx("i",{className:"fa-solid fa-envelope",style:{color:"#ffc107"}}),u.action.toLowerCase().includes("limit")&&e.jsx("i",{className:"fa-solid fa-sliders",style:{color:"#0d6efd"}}),u.action.toLowerCase().includes("production")&&e.jsx("i",{className:"fa-solid fa-industry",style:{color:"#198754"}}),u.action]})}),e.jsx("td",{style:{padding:"12px",color:"#495057"},children:u.details})]},f))})]})})]})]})}function Pi({awsData:l,awsCredentials:t}){const[r,a]=w.useState([]),[p,c]=w.useState({}),[g,u]=w.useState(!1),[f,d]=w.useState({}),[x,T]=w.useState(!0),[b,j]=w.useState("practicing"),[A,N]=w.useState(!1),[_,E]=w.useState({}),[P,re]=w.useState({}),D=w.useRef(null),[F,X]=w.useState(!0),[Z,$]=w.useState(!1);w.useEffect(()=>{(async()=>{try{const S=localStorage.getItem("authToken"),I=await(await fetch("/api/production-mode-settings",{headers:{Authorization:`Bearer ${S}`}})).json();I.success&&(N(I.enabled),E(I.instanceSettings||{}))}catch(S){console.error("Error loading production mode settings:",S)}})()},[]),w.useEffect(()=>{l&&(be(!F),F&&X(!1),Z&&$(!1))},[l,F]),w.useEffect(()=>{if(x&&t)return console.log("🔄 Auto-refresh enabled - refreshing every 30 seconds"),D.current=setInterval(()=>{console.log("🔄 Auto-refreshing AWS data..."),le()},3e4),()=>{D.current&&(clearInterval(D.current),console.log("🛑 Auto-refresh stopped"))}},[x,t]),w.useEffect(()=>{r.length>0&&r.forEach(h=>{const S=p[h.id];S!=null&&S.autoShutdown&&h.cpuAvg>S.cpuLimit&&h.state==="running"&&!f[h.id]&&(console.log(`⚡ Auto-shutdown triggering for ${h.id}`),ze(h.id,`Auto-shutdown: CPU ${h.cpuAvg}% > ${S.cpuLimit}%`,!0))})},[r,p]);const le=async()=>{$(!0);const h=new CustomEvent("refreshAWSData");window.dispatchEvent(h),setTimeout(()=>$(!1),5e3)},be=async(h=!1)=>{h||u(!0);try{if(console.log(h?"🔄 Background refresh (Metrics only)...":"Loading instances and limits..."),!h){const L=localStorage.getItem("authToken"),G=await(await fetch("/api/instance-limits",{headers:{Authorization:`Bearer ${L}`}})).json();if(console.log("Limits response:",G),G.success){const J={};G.limits.forEach(ne=>{J[ne.instanceId]={cpuLimit:ne.cpuLimit,autoShutdown:ne.autoShutdown,autoMonitoring:ne.autoMonitoring||!1,breachCount:ne.breachCount||0}}),c(J)}}const S=[],v=(l==null?void 0:l.ec2Details)||(l==null?void 0:l.instances)||[],I=(l==null?void 0:l.underutilizedEC2)||[],C=(l==null?void 0:l.ec2Metrics)||{};h||console.log("EC2 Details from backend:",v),Array.isArray(v)&&v.length>0&&v.forEach(L=>{var Pe,Oe;const we=I.some(ce=>ce.id===L.id),G=I.find(ce=>ce.id===L.id),J=C[L.id];let ne=0;J&&J.cpu?ne=J.cpu.average||0:G&&G.cpuAvg!==void 0&&(ne=G.cpuAvg),S.push({id:L.id||"unknown",name:((Pe=L.tags)==null?void 0:Pe.Name)||L.id||"Unnamed Instance",type:L.type||"unknown",state:L.state||"unknown",cpuAvg:parseFloat(ne),cpuMax:((Oe=J==null?void 0:J.cpu)==null?void 0:Oe.maximum)||0,isUnderutilized:we})}),h?console.log(`✅ Metrics updated for ${S.length} instances`):(console.log("Final instances list:",S),S.length===0&&console.warn("⚠️ No instances found in data!")),a(S)}catch(S){console.error("Error loading instances:",S),h||a([])}finally{h||u(!1)}},je=(h,S)=>{c(v=>({...v,[h]:{...v[h],cpuLimit:parseInt(S)||80}}))},M=h=>{c(S=>{var v;return{...S,[h]:{...S[h],autoShutdown:!((v=S[h])!=null&&v.autoShutdown)}}})},W=async h=>{var I,C;const v=!(((I=p[h])==null?void 0:I.autoMonitoring)||!1);d(L=>({...L,[h]:!0}));try{const L=localStorage.getItem("authToken"),G=await(await fetch("/api/instance-auto-monitor",{method:"POST",headers:{Authorization:`Bearer ${L}`,"Content-Type":"application/json"},body:JSON.stringify({instanceId:h,enabled:v,cpuLimit:((C=p[h])==null?void 0:C.cpuLimit)||80})})).json();G.success?(c(J=>({...J,[h]:{...J[h],autoMonitoring:v}})),alert(`Auto-monitoring ${v?"enabled":"disabled"} for ${h}`)):alert("Failed to update auto-monitoring: "+G.message)}catch(L){console.error("Error toggling auto-monitoring:",L),alert("Failed to update auto-monitoring")}finally{d(L=>({...L,[h]:!1}))}},ft=async h=>{d(S=>({...S,[h]:!0}));try{const S=localStorage.getItem("authToken"),v=p[h]||{cpuLimit:80,autoShutdown:!0},C=await(await fetch("/api/instance-limits",{method:"POST",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},body:JSON.stringify({instanceId:h,cpuLimit:v.cpuLimit,autoShutdown:v.autoShutdown})})).json();C.success?alert(`Limit saved for ${h}: CPU ${v.cpuLimit}%, Auto-shutdown: ${v.autoShutdown?"ON":"OFF"}`):alert("Failed to save limit: "+C.message)}catch(S){console.error("Error saving limit:",S),alert("Failed to save limit")}finally{d(S=>({...S,[h]:!1}))}},ze=async(h,S="User triggered stop",v=!1)=>{if(!(!v&&!window.confirm(`Are you sure you want to stop instance ${h}?`))){d(I=>({...I,[h]:!0}));try{const I=localStorage.getItem("authToken"),L=await(await fetch("/api/stop-instance",{method:"POST",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"},body:JSON.stringify({instanceId:h,reason:S})})).json();L.success?(alert(`✅ Instance ${h} stopped successfully!`),le()):alert(`❌ Failed to stop instance: ${L.message}`)}catch(I){console.error("Error stopping instance:",I),alert("Failed to stop instance due to an error")}finally{d(I=>({...I,[h]:!1}))}}},gt=async()=>{const h=!A;try{const S=localStorage.getItem("authToken");(await(await fetch("/api/production-mode-settings",{method:"POST",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},body:JSON.stringify({enabled:h})})).json()).success?(N(h),alert(`✅ Production Mode ${h?"enabled":"disabled"}! ${h?"Background monitoring will send email alerts for low-utilization instances.":"Email alerts are now disabled."}`)):alert("❌ Failed to update production mode settings")}catch(S){console.error("Error toggling production mode:",S),alert("Failed to update production mode")}},Ke=async h=>{var I;const v=!(((I=_[h])==null?void 0:I.emailEnabled)!==!1);try{const C=localStorage.getItem("authToken");(await(await fetch("/api/production-mode-settings",{method:"POST",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify({instanceId:h,emailEnabled:v})})).json()).success?E(G=>({...G,[h]:{emailEnabled:v}})):alert("❌ Failed to update email settings")}catch(C){console.error("Error toggling email setting:",C),alert("Failed to update email setting")}};return g?e.jsxs("div",{className:"section-card",children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-sliders"})," Resource Management"]})}),e.jsx("div",{style:{padding:"20px"},children:e.jsx(Nn,{rows:5,columns:8})})]}):r.length===0?e.jsxs("div",{className:"section-card",children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-sliders"})," Resource Management"]})}),e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("i",{className:"fa-solid fa-server",style:{fontSize:"2rem",color:"#999",marginBottom:"16px"}}),e.jsx("p",{style:{color:"#666"},children:"No instances found. Run an analysis first."})]})]}):e.jsx("div",{id:"resourceManagementContent",style:{display:"block"},children:e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{children:[e.jsx("i",{className:"fa-solid fa-sliders"})," Resource Management & Auto-Shutdown"]}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#6c757d",margin:"8px 0 0 0"},children:"Set CPU limits and enable auto-shutdown for your EC2 instances"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",background:"#e9ecef",borderRadius:"4px",padding:"2px",marginRight:"10px"},children:[e.jsxs("button",{onClick:()=>j("practicing"),style:{padding:"6px 12px",border:"none",borderRadius:"4px",cursor:"pointer",background:b==="practicing"?"white":"transparent",color:b==="practicing"?"#0d6efd":"#495057",fontWeight:500,fontSize:"0.85rem",boxShadow:b==="practicing"?"0 1px 2px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[e.jsx("i",{className:"fa-solid fa-graduation-cap"})," Practicing"]}),e.jsxs("button",{onClick:()=>j("production"),style:{padding:"6px 12px",border:"none",borderRadius:"4px",cursor:"pointer",background:b==="production"?"white":"transparent",color:b==="production"?"#0d6efd":"#495057",fontWeight:500,fontSize:"0.85rem",boxShadow:b==="production"?"0 1px 2px rgba(0,0,0,0.1)":"none",transition:"all 0.2s"},children:[e.jsx("i",{className:"fa-solid fa-industry"})," Production"]})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:x,onChange:h=>T(h.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{style:{fontSize:"0.9rem",fontWeight:500},children:"Auto-refresh"})]}),e.jsxs("button",{onClick:le,disabled:Z,style:{padding:"8px 16px",background:Z?"#218838":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:Z?"wait":"pointer",fontSize:"0.85rem",fontWeight:600,opacity:Z?.8:1,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("i",{className:`fa-solid fa-refresh ${Z?"fa-spin":""}`}),Z?"Refreshing...":"Refresh Now"]})]})]}),b==="practicing"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{overflowX:"auto",position:"relative",minHeight:"200px"},children:[Z&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,borderRadius:"8px"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin",style:{fontSize:"2rem",color:"#007bff"}}),e.jsx("span",{style:{fontWeight:600,color:"#007bff"},children:"Refreshing Data..."})]})}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem",opacity:Z?.5:1,transition:"opacity 0.2s"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Instance"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Type"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"State"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Current CPU"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"CPU Limit (%)"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Auto-Shutdown"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Auto-Monitor"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:r.map(h=>{const S=p[h.id]||{cpuLimit:80,autoShutdown:!0,autoMonitoring:!1},v=f[h.id],I=S.autoMonitoring,C=h.cpuAvg>S.cpuLimit;return e.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6",background:C?"#fff3cd":"transparent"},children:[e.jsx("td",{style:{padding:"12px"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:h.name}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6c757d"},children:h.id}),h.isUnderutilized&&e.jsx("span",{style:{fontSize:"0.75rem",background:"#fff3cd",color:"#856404",padding:"2px 6px",borderRadius:"4px",display:"inline-block",marginTop:"4px"},children:"Underutilized"})]})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsx("span",{style:{background:"#e9ecef",padding:"4px 8px",borderRadius:"4px",fontSize:"0.85rem"},children:h.type})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsx("span",{style:{background:h.state==="running"?"#d4edda":"#f8d7da",color:h.state==="running"?"#155724":"#721c24",padding:"4px 8px",borderRadius:"4px",fontSize:"0.85rem",fontWeight:600},children:h.state})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsxs("div",{style:{fontWeight:600,color:h.cpuAvg<10?"#28a745":h.cpuAvg>80?"#dc3545":"#495057"},title:`Average: ${h.cpuAvg.toFixed(2)}% | Max: ${h.cpuMax.toFixed(2)}%`,children:[h.cpuAvg.toFixed(1),"%",h.cpuMax>0&&e.jsxs("div",{style:{fontSize:"0.7rem",color:"#6c757d",fontWeight:"normal"},children:["max: ",h.cpuMax.toFixed(1),"%"]})]})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsx("input",{type:"number",min:"10",max:"100",value:S.cpuLimit,onChange:L=>je(h.id,L.target.value),style:{width:"70px",padding:"6px",border:"1px solid #dee2e6",borderRadius:"4px",textAlign:"center",fontSize:"0.9rem"}})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsx("label",{style:{display:"inline-flex",alignItems:"center",cursor:"pointer"},children:e.jsx("input",{type:"checkbox",checked:S.autoShutdown,onChange:()=>M(h.id),style:{width:"18px",height:"18px",cursor:"pointer"}})})}),e.jsxs("td",{style:{padding:"12px",textAlign:"center"},children:[e.jsxs("label",{style:{position:"relative",display:"inline-block",width:"40px",height:"20px"},children:[e.jsx("input",{type:"checkbox",checked:I,disabled:v,onChange:()=>W(h.id),style:{opacity:0,width:0,height:0}}),e.jsx("span",{style:{position:"absolute",cursor:v?"not-allowed":"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:I?"#28a745":"#ccc",transition:".4s",borderRadius:"34px"},children:e.jsx("span",{style:{position:"absolute",content:"",height:"16px",width:"16px",left:I?"22px":"2px",bottom:"2px",backgroundColor:"white",transition:".4s",borderRadius:"50%"}})})]}),v&&e.jsx("div",{style:{fontSize:"0.7rem",color:"#666"},children:"Saving..."})]}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsx("button",{onClick:()=>ft(h.id),disabled:v,style:{padding:"8px 16px",background:"linear-gradient(135deg, #FF9900 0%, #FFB84D 100%)",color:"white",border:"none",borderRadius:"4px",cursor:v?"not-allowed":"pointer",fontSize:"0.85rem",fontWeight:600},children:v?e.jsx("i",{className:"fa-solid fa-spinner fa-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-save"})," Save"]})})})]},h.id)})})]})]}),e.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#f8f9fa",borderRadius:"8px",fontSize:"0.85rem"},children:[e.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"0.95rem"},children:[e.jsx("i",{className:"fa-solid fa-info-circle"})," How It Works"]}),e.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.8"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"CPU Limit"}),": Set the maximum CPU usage threshold (10-100%)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Auto-Shutdown"}),": Enable to automatically stop instance when limit is exceeded"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Auto-Monitor"}),": Enable Lambda-based monitoring (checks every 5 minutes)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Auto-Refresh"}),": Automatically refresh data every 30 seconds to see real-time changes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Save"}),": Click to save your limit settings"]})]}),e.jsx("div",{style:{marginTop:"12px",padding:"10px 14px",background:"#f5f5f5",borderRadius:"0px",border:"1px solid #ddd",color:"#555",fontSize:"0.85rem"},children:'Auto-Refresh: Data refreshes every 30 seconds when enabled. You can also click "Refresh Now" for immediate updates.'})]})]}):e.jsxs("div",{id:"productionModeContainer",children:[e.jsxs("div",{style:{marginBottom:"24px",padding:"16px 20px",background:A?"#f0f9eb":"#fff8f6",border:`1px solid ${A?"#c3e6cb":"#f5c6cb"}`,borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"space-between",borderLeft:`8px solid ${A?"#28a745":"#dc3545"}`},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"1rem",color:A?"#155724":"#721c24",fontWeight:600,display:"flex",alignItems:"center",gap:"8px"},children:A?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-check-circle"})," Production Mode Enabled"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-ban"})," Low Utilization Detection Disabled"]})}),e.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:A?"#28a745":"#721c24",lineHeight:"1.4"},children:A?"✅ Background monitoring active. Email alerts will be sent automatically every 15 minutes for low-utilization instances.":"Monitoring instances with CPU usage below 5%. Email alerts are sent automatically for cost optimization."})]}),e.jsxs("label",{className:"switch",style:{position:"relative",display:"inline-block",width:"50px",height:"24px",flexShrink:0},children:[e.jsx("input",{type:"checkbox",checked:A,onChange:gt,style:{opacity:0,width:0,height:0}}),e.jsx("span",{className:"slider round",style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:A?"#28a745":"#ccc",transition:".4s",borderRadius:"24px"},children:e.jsx("span",{style:{position:"absolute",content:"",height:"20px",width:"20px",left:A?"26px":"4px",bottom:"2px",backgroundColor:"white",transition:".4s",borderRadius:"50%"}})})]})]}),r.filter(h=>h.cpuAvg<5&&h.state==="running").length===0?e.jsxs("div",{style:{padding:"40px",textAlign:"center",background:"#f8f9fa",borderRadius:"8px",border:"2px dashed #dee2e6"},children:[e.jsx("i",{className:"fa-solid fa-check-circle",style:{fontSize:"3rem",color:"#28a745",marginBottom:"20px"}}),e.jsx("h3",{style:{color:"#495057",marginBottom:"10px"},children:"All Resources Optimized"}),e.jsxs("p",{style:{color:"#6c757d"},children:["No low-utilization instances detected (CPU < ",5,"%)."]})]}):e.jsxs("div",{style:{overflowX:"auto",position:"relative",minHeight:"150px"},children:[Z&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,borderRadius:"8px"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[e.jsx("i",{className:"fa-solid fa-circle-notch fa-spin",style:{fontSize:"2rem",color:"#dc3545"}}),e.jsx("span",{style:{fontWeight:600,color:"#dc3545"},children:"Checking Metrics..."})]})}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem",opacity:Z?.5:1,transition:"opacity 0.2s"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Instance"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Type"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Current CPU"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Avg Usage"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Max Usage"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Email Alerts"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Last Email"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:r.filter(h=>h.cpuAvg<5&&h.state==="running").map(h=>{var v,I,C;const S=f[h.id];return e.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6",background:"#fff3cd"},children:[e.jsx("td",{style:{padding:"12px"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:h.name}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6c757d"},children:h.id}),e.jsx("span",{style:{fontSize:"0.75rem",background:"#dc3545",color:"white",padding:"2px 6px",borderRadius:"4px",display:"inline-block",marginTop:"4px"},children:"Low Utilization"})]})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsx("span",{style:{background:"#e9ecef",padding:"4px 8px",borderRadius:"4px",fontSize:"0.85rem"},children:h.type})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsxs("div",{style:{fontWeight:600,color:"#dc3545",fontSize:"1.1rem"},children:[h.cpuAvg.toFixed(2),"%"]})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsxs("div",{style:{color:"#6c757d"},children:[h.cpuAvg.toFixed(2),"%"]})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsxs("div",{style:{color:"#6c757d"},children:[h.cpuMax.toFixed(2),"%"]})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsxs("label",{className:"switch",style:{position:"relative",display:"inline-block",width:"40px",height:"20px"},children:[e.jsx("input",{type:"checkbox",checked:((v=_[h.id])==null?void 0:v.emailEnabled)!==!1,onChange:()=>Ke(h.id),style:{opacity:0,width:0,height:0}}),e.jsx("span",{className:"slider round",style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:((I=_[h.id])==null?void 0:I.emailEnabled)!==!1?"#28a745":"#ccc",transition:".4s",borderRadius:"20px"},children:e.jsx("span",{style:{position:"absolute",content:"",height:"16px",width:"16px",left:((C=_[h.id])==null?void 0:C.emailEnabled)!==!1?"22px":"2px",bottom:"2px",backgroundColor:"white",transition:".4s",borderRadius:"50%"}})})]})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:P[h.id]?e.jsxs("div",{style:{fontSize:"0.8rem"},children:[e.jsxs("div",{style:{color:"#155724",fontWeight:600},children:[e.jsx("i",{className:"fa-solid fa-check"})," Sent"]}),e.jsx("div",{style:{color:"#6c757d",fontSize:"0.75rem"},children:new Date(P[h.id]).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}):e.jsx("span",{style:{color:"#6c757d",fontSize:"0.8rem"},children:"-"})}),e.jsx("td",{style:{padding:"12px",textAlign:"center"},children:e.jsx("button",{onClick:()=>ze(h.id,`Production Mode: Low CPU ${h.cpuAvg.toFixed(2)}%`),disabled:S,style:{padding:"8px 16px",background:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:S?"not-allowed":"pointer",fontSize:"0.85rem",fontWeight:600},children:S?e.jsx("i",{className:"fa-solid fa-spinner fa-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-stop"})," Stop Instance"]})})})]},h.id)})})]})]})]})]})})}function Oi(){const l=Ft(),[t,s]=w.useState("dashboard"),[n,i]=w.useState(!1),[r,a]=w.useState(null),[p,c]=w.useState(""),[g,u]=w.useState(!1),[f,d]=w.useState(null);w.useEffect(()=>{const N=localStorage.getItem("username");N&&c(N);const _=localStorage.getItem("lastAnalysis");if(_)try{a(JSON.parse(_))}catch(P){console.error("Error loading cached data:",P)}localStorage.getItem("authToken")&&x()},[]);const x=async()=>{const N=localStorage.getItem("authToken");if(!N){console.log("No auth token found");return}try{const _=await fetch("/api/profile",{headers:{Authorization:`Bearer ${N}`}});if(_.status===401||_.status===403){console.log("Token expired or invalid");return}const E=await _.json();E.success&&d(E.user)}catch(_){console.error("Error fetching profile:",_)}},T=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("username"),localStorage.removeItem("awsCredentials"),localStorage.removeItem("lastAnalysis"),l("/login")},b=async(N,_,E={})=>{const{hideLoader:P=!1,skipAI:re=!1,navigateOnSuccess:D=!1}=E;P||i(!0);try{localStorage.setItem("awsCredentials",JSON.stringify({awsAccessKey:N,awsSecretKey:_}));const F=await $t.analyzeAWS(N,_,{skipAI:re});F.success?(a(X=>re&&!F.aiAdvice&&(X!=null&&X.aiAdvice)?{...F,aiAdvice:X.aiAdvice}:F),re||localStorage.setItem("lastAnalysis",JSON.stringify(F)),(D||!P)&&s("dashboard")):(P||alert(F.message||"Failed to analyze AWS infrastructure"),console.error("Refresh failed:",F.message))}catch(F){console.error("Analysis error:",F),P||alert("Failed to connect to the server. Please ensure the backend is running.")}finally{P||i(!1)}};w.useEffect(()=>{const N=async()=>{console.log("🔄 Refresh event received");const _=localStorage.getItem("awsCredentials");if(_)try{const{awsAccessKey:E,awsSecretKey:P}=JSON.parse(_);console.log("🔄 Re-analyzing (Background - No AI)..."),await b(E,P,{hideLoader:!0,skipAI:!0})}catch(E){console.error("Error refreshing:",E)}};return window.addEventListener("refreshAWSData",N),()=>window.removeEventListener("refreshAWSData",N)},[]);const j=async N=>{if(s(N),N==="dashboard"){const _=localStorage.getItem("awsCredentials");if(_)try{const{awsAccessKey:E,awsSecretKey:P}=JSON.parse(_);console.log("🧠 Refreshing AI advice for Dashboard view..."),await b(E,P,{hideLoader:!0,skipAI:!1})}catch(E){console.error("Error refreshing AI:",E)}}},A=N=>{d({...f,...N})};return e.jsxs(e.Fragment,{children:[e.jsx(Sn,{username:p,onLogout:T,onOpenSettings:()=>u(!0)}),e.jsx(_n,{isOpen:g,onClose:()=>u(!1),userInfo:f,onUpdate:A}),e.jsx(An,{currentSection:t,onNavigate:j}),e.jsxs("div",{className:"container",style:{maxWidth:"1400px",margin:"20px auto",padding:"0 20px"},children:[t==="credentials"&&e.jsx(Tn,{onAnalyze:(N,_)=>b(N,_,{hideLoader:!0,navigateOnSuccess:!0}),onBack:()=>s("dashboard")}),n&&e.jsx(En,{}),!n&&t==="dashboard"&&r&&e.jsx(Cn,{data:r,onNavigate:j}),!n&&t==="ai-assistant"&&r&&e.jsx(Li,{aiAdvice:r.aiAdvice}),!n&&t==="ai-assistant"&&!r&&e.jsxs("div",{className:"section-card",style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx("i",{className:"fa-solid fa-robot",style:{fontSize:"3rem",color:"#667eea",marginBottom:"20px"}}),e.jsx("h2",{style:{marginBottom:"15px"},children:"AI Assistant"}),e.jsx("p",{style:{marginBottom:"30px",color:"#666"},children:"Please analyze your AWS infrastructure first to use the AI Assistant"}),e.jsxs("button",{onClick:()=>s("credentials"),style:{padding:"14px 28px",background:"var(--color-primary-gradient)",color:"white",border:"none",borderRadius:"8px",fontSize:"1.05rem",fontWeight:600,cursor:"pointer"},children:[e.jsx("i",{className:"fa-solid fa-key"})," Configure AWS Credentials"]})]}),!n&&t==="dashboard"&&!r&&e.jsxs("div",{className:"section-card",style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx("img",{src:"/logo-w.png",alt:"CostInsight Logo",style:{width:"4.2rem",height:"4.2rem",objectFit:"contain",marginBottom:"20px",display:"inline-block",verticalAlign:"middle"}}),e.jsx("h2",{style:{marginBottom:"15px"},children:"Welcome to CostInsight"}),e.jsx("p",{style:{marginBottom:"30px",color:"#666"},children:"Start by configuring your AWS credentials to analyze your infrastructure"}),e.jsxs("button",{onClick:()=>s("credentials"),style:{padding:"14px 28px",background:"var(--color-primary-gradient)",color:"white",border:"none",borderRadius:"8px",fontSize:"1.05rem",fontWeight:600,cursor:"pointer"},children:[e.jsx("i",{className:"fa-solid fa-key"})," Configure AWS Credentials"]})]}),!n&&t==="historical-trends"&&r&&e.jsx(zi,{history:r.history||[]}),!n&&t==="historical-trends"&&!r&&e.jsxs("div",{className:"section-card",style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx("i",{className:"fa-solid fa-chart-line",style:{fontSize:"3rem",color:"#FF9900",marginBottom:"20px"}}),e.jsx("h2",{style:{marginBottom:"15px"},children:"Historical Trends"}),e.jsx("p",{style:{marginBottom:"30px",color:"#666"},children:"Please analyze your AWS infrastructure first to view historical trends"}),e.jsxs("button",{onClick:()=>s("credentials"),style:{padding:"14px 28px",background:"var(--color-primary-gradient)",color:"white",border:"none",borderRadius:"8px",fontSize:"1.05rem",fontWeight:600,cursor:"pointer"},children:[e.jsx("i",{className:"fa-solid fa-key"})," Configure AWS Credentials"]})]}),!n&&t==="resource-management"&&r&&e.jsx(Pi,{awsData:r.awsData,awsCredentials:{}}),!n&&t==="resource-management"&&!r&&e.jsxs("div",{className:"section-card",style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx("i",{className:"fa-solid fa-sliders",style:{fontSize:"3rem",color:"#FF9900",marginBottom:"20px"}}),e.jsx("h2",{style:{marginBottom:"15px"},children:"Resource Management"}),e.jsx("p",{style:{marginBottom:"30px",color:"#666"},children:"Please analyze your AWS infrastructure first to manage resources"}),e.jsxs("button",{onClick:()=>s("credentials"),style:{padding:"14px 28px",background:"var(--color-primary-gradient)",color:"white",border:"none",borderRadius:"8px",fontSize:"1.05rem",fontWeight:600,cursor:"pointer"},children:[e.jsx("i",{className:"fa-solid fa-key"})," Configure AWS Credentials"]})]})]})]})}const Di=({children:l})=>localStorage.getItem("authToken")?l:e.jsx(gn,{to:"/login",replace:!0});function Mi(){return e.jsx(xn,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsxs(yn,{children:[e.jsx(it,{path:"/",element:e.jsx(jn,{})}),e.jsx(it,{path:"/login",element:e.jsx(kn,{})}),e.jsx(it,{path:"/signup",element:e.jsx(vn,{})}),e.jsx(it,{path:"/dashboard",element:e.jsx(Di,{children:e.jsx(Oi,{})})})]})})}Lt.createRoot(document.getElementById("root")).render(e.jsx(bn.StrictMode,{children:e.jsx(Mi,{})}));
