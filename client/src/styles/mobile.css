/* === Mobile Responsiveness Improvements === */

@media (max-width: 768px) {
    /* 1. Dashboard Layout & Spacing */
    .dashboard-content {
        padding: 16px 12px; /* Reduce padding */
    }

    .section-card {
        padding: 16px; /* Reduce inner card padding */
    }

    .card-item {
        padding: 16px;
    }

    .dashboard-header h2 {
        font-size: 1.5rem;
    }
    
    .dashboard-header p {
        font-size: 0.9rem;
    }

    /* 2. Account Settings Modal - Stack Layout */
    .account-settings-modal {
        width: 100%;
        height: 100%;
        max-height: 100vh;
        max-width: 100vw;
        border-radius: 0;
        display: flex;
        flex-direction: column;
    }

    .modal-body {
        flex-direction: column;
        overflow-y: auto; /* Scroll the whole body */
    }

    .settings-sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #e3e6e6;
        padding: 16px;
        flex-shrink: 0; /* Prevent shrinking */
    }

    .settings-nav {
        display: flex;
        flex-direction: row; /* Horizontal nav on mobile */
        overflow-x: auto;
        gap: 8px;
        padding-bottom: 4px;
    }

    .settings-nav-item {
        white-space: nowrap;
        width: auto;
        padding: 8px 12px;
        font-size: 0.9rem;
    }

    .settings-content {
        padding: 16px;
        overflow-y: visible; /* Let parent scroll */
    }

    .form-row {
        grid-template-columns: 1fr; /* Stack form inputs */
        gap: 0;
    }

    .modal-header {
        padding: 16px;
    }

    .modal-overlay {
        align-items: flex-end; /* Sheet-like on iOS? or just fill */
    }

    /* 3. Credentials Section */
    .credentials-section {
        padding: 16px;
    }

    .section-header {
        flex-direction: column;
        gap: 12px;
        align-items: flex-start;
    }

    .section-header button {
        width: 100%;
        justify-content: center;
    }
    
    .credentials-grid {
        grid-template-columns: 1fr; /* Stack inputs */
    }

    /* 4. Tables */
    .data-table th, 
    .data-table td {
        padding: 10px 8px; /* Tighter table cells */
        font-size: 0.85rem;
    }

    /* 5. Production Mode Banner */
    #productionModeContainer > div {
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
    }

    #productionModeContainer .switch {
        align-self: flex-end; /* Move switch to right */
        margin-top: -40px; /* Pull it up next to title if desired, or just keep stacked */
    }
    
    /* Better switch positioning for stacked layout */
    #productionModeContainer > div > div:first-child {
        width: 100%;
        padding-right: 60px; /* Make space for switch */
    }
    
    #productionModeContainer .switch {
        position: absolute;
        right: 20px;
        top: 20px;
        margin-top: 0;
    }
    
    #productionModeContainer > div {
        position: relative; /* Context for absolute switch */
        display: block; /* Force block to allow absolute positioning context work better */
    }

    /* 6. Navbar */
    .nav-item a {
        flex-direction: column;
        gap: 4px;
        text-align: center;
        padding: 10px 4px;
        font-size: 0.75rem;
    }

    .nav-item a i {
        font-size: 1.2rem;
        margin-bottom: 2px;
    }
    
    .navbar {
        top: 50px; /* Adjust for header height */
    }
    
    /* 7. Header */
    .header-container {
        padding: 0 12px;
    }
    
    .header-title {
        font-size: 1.1rem;
    }
    
    .profile-info {
        display: none; /* Hide name/role on mobile to save space */
    }
    
    .profile-section {
        padding: 4px;
    }
    
    .logout-button span {
        display: none; /* Hide "Sign Out" text */
    }
    
    .logout-button {
        padding: 8px;
    }
    
    .logout-button i {
        margin: 0;
        font-size: 1rem;
    }
}

@media (max-width: 480px) {
    /* Further tweaks for very small screens */
    .dashboard-header h2 {
        font-size: 1.3rem;
    }
    
    .card-item-value {
        font-size: 1.5rem;
    }
    
    .metric-box {
        min-width: 100%; /* Stack metrics fully */
    }
}

/* === Resource Management Tab Mobile Improvements === */

@media (max-width: 768px) {
    /* 1. Header Area: Stack Title and Controls */
    #resourceManagementContent .section-header {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 16px !important;
    }

    /* The controls container (Practicing/Production toggle + Refresh) */
    #resourceManagementContent .section-header > div:last-child {
        width: 100% !important;
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 12px !important;
    }

    /* Practicing/Production Toggle Group */
    #resourceManagementContent .section-header > div:last-child > div:first-child {
        width: 100% !important;
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        margin-right: 0 !important;
    }

    #resourceManagementContent .section-header button {
        width: 100% !important;
        text-align: center !important;
        justify-content: center !important;
    }

    /* Auto-Refresh Checkbox Area */
    #resourceManagementContent label {
        width: 100%;
        padding: 8px 0;
        border-top: 1px solid #eee;
    }

    /* Refresh Button */
    .refresh-btn {
        width: 100% !important;
        justify-content: center !important;
        margin-top: 8px;
    }

    /* 2. Tables: Compact View */
    #resourceManagementContent table {
        /* display: block;  Avoid block on table it ruins columns sometimes, depend on overflow container */
    }

    #resourceManagementContent th,
    #resourceManagementContent td {
        padding: 8px 6px !important;
        font-size: 0.8rem !important;
        white-space: nowrap; /* Keep cells valid */
    }

    /* Instance Name Column */
    #resourceManagementContent td > div > div:first-child {
        font-weight: 600;
        white-space: normal !important; /* Allow name wrapping */
        min-width: 120px;
    }

    /* Input fields in table */
    #resourceManagementContent input[type='number'] {
        width: 60px !important;
        padding: 4px !important;
    }

    /* 3. Production Mode Banner Stack */
    #productionModeContainer > div {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 16px !important;
    }

    /* Banner text */
    #productionModeContainer > div > div {
        width: 100% !important;
    }

    /* Banner Switch */
    #productionModeContainer .switch {
        align-self: flex-start !important;
        margin-top: 8px !important;
    }

    /* 4. Legend / Info Box */
    #resourceManagementContent .section-card > div:last-child {
        padding: 12px !important;
    }

    #resourceManagementContent ul {
        padding-left: 16px !important;
    }
    
    #resourceManagementContent li {
        font-size: 0.85rem !important;
        margin-bottom: 6px !important;
    }
}
